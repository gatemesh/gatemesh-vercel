; PlatformIO Project Configuration File
;
;   Build options: build flags, source filter
;   Upload options: custom upload port, speed and extra flags
;   Library options: dependencies, extra library storages
;   Advanced options: extra scripting
;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html

[platformio]
default_envs = seeed_xiao_esp32s3
extra_configs =
	arch/*/*.ini
	variants/*/*/platformio.ini
	variants/*/diy/*/platformio.ini
	src/graphics/niche/InkHUD/PlatformioConfig.ini
description = GateMesh - Agricultural Irrigation Control System
globallib_dir = ~/.platformio/lib

[env:seeed_xiao_esp32s3]
extends = esp32_base
board = seeed-xiao-s3
board_level = pr
board_check = true
lib_deps = 
	bblanchon/ArduinoJson@^7.4.2
	${esp32_base.lib_deps}
	lewisxhe/PCF8563_Library@^1.0.1
build_flags = 
	${esp32_base.build_flags}
	-D SEEED_XIAO_ESP32S3
	-I variants/esp32/seeed_xiao_esp32s3
	-DBOARD_HAS_PSRAM
	-DARDUINO_USB_CDC_ON_BOOT=1
	-DARDUINO_USB_MODE=0
	-D PCF8563_RTC=0x51
upload_speed = 921600

[env]
test_build_src = true
extra_scripts = bin/platformio-custom.py
build_flags = -Wno-missing-field-initializers
	
	-Wno-format
	-Isrc -Isrc/mesh -Isrc/mesh/generated -Isrc/gps -Isrc/buzz -Wl,-Map,"${platformio.build_dir}"/output.map
	-DUSE_THREAD_NAMES
	-DTINYGPS_OPTION_NO_CUSTOM_FIELDS
	-DPB_ENABLE_MALLOC=1
	-DRADIOLIB_EXCLUDE_CC1101=1
	-DRADIOLIB_EXCLUDE_NRF24=1
	-DRADIOLIB_EXCLUDE_RF69=1
	-DRADIOLIB_EXCLUDE_SX1231=1
	-DRADIOLIB_EXCLUDE_SX1233=1
	-DRADIOLIB_EXCLUDE_SI443X=1
	-DRADIOLIB_EXCLUDE_RFM2X=1
	-DRADIOLIB_EXCLUDE_AFSK=1
	-DRADIOLIB_EXCLUDE_BELL=1
	-DRADIOLIB_EXCLUDE_HELLSCHREIBER=1
	-DRADIOLIB_EXCLUDE_MORSE=1
	-DRADIOLIB_EXCLUDE_RTTY=1
	-DRADIOLIB_EXCLUDE_SSTV=1
	-DRADIOLIB_EXCLUDE_AX25=1
	-DRADIOLIB_EXCLUDE_DIRECT_RECEIVE=1
	-DRADIOLIB_EXCLUDE_BELL=1
	-DRADIOLIB_EXCLUDE_PAGER=1
	-DRADIOLIB_EXCLUDE_FSK4=1
	-DRADIOLIB_EXCLUDE_APRS=1
	-DRADIOLIB_EXCLUDE_LORAWAN=1
	-DMESHTASTIC_EXCLUDE_DROPZONE=1
	-DMESHTASTIC_EXCLUDE_REMOTEHARDWARE=1
	-DMESHTASTIC_EXCLUDE_HEALTH_TELEMETRY=1
	-DMESHTASTIC_EXCLUDE_POWERSTRESS=1
	-DMESHTASTIC_EXCLUDE_GENERIC_THREAD_MODULE=1
	-DGATEMESH_EXCLUDE_AUDIO=1
	-DGATEMESH_EXCLUDE_PAXCOUNTER=1
	-DGATEMESH_EXCLUDE_CANNEDMESSAGES=1
	-DIRRIGATION_BUILD=1
	-D MAX_THREADS=40
monitor_speed = 115200
monitor_filters = direct
lib_deps = 
	https://github.com/meshtastic/esp8266-oled-ssd1306/archive/0cbc26b1f8f61957af0475f486b362eafe7cc4e2.zip
	https://github.com/meshtastic/OneButton/archive/fa352d668c53f290cfa480a5f79ad422cd828c70.zip
	https://github.com/meshtastic/arduino-fsm/archive/7db3702bf0cfe97b783d6c72595e3f38e0b19159.zip
	https://github.com/meshtastic/TinyGPSPlus/archive/71a82db35f3b973440044c476d4bcdc673b104f4.zip
	https://github.com/meshtastic/ArduinoThread/archive/7c3ee9e1951551b949763b1f5280f8db1fa4068d.zip
	nanopb/Nanopb@0.4.91
	erriez/ErriezCRC32@1.0.1
check_tool = cppcheck
check_skip_packages = yes
check_flags = 
	-DAPP_VERSION=1.0.0
	--suppressions-list=suppressions.txt
	--inline-suppr

[arduino_base]
framework = arduino
lib_deps = 
	${env.lib_deps}
	end2endzone/NonBlockingRTTTL@1.3.0
build_flags = ${env.build_flags} -Os -include "c:/Users/justi/OneDrive/Documents/PlatformIO/firmware/src/ArduinoCompat.h"
build_src_filter = ${env.build_src_filter} -<platform/portduino/> -<graphics/niche/>

[networking_base]
lib_deps = 
	thingsboard/TBPubSubClient@2.12.1
	arduino-libraries/NTPClient@3.2.1
	arcao/Syslog@2.0.0

[nrf52_networking_base]
lib_deps = 
	thingsboard/TBPubSubClient@2.12.1
	arduino-libraries/NTPClient@3.2.1

[radiolib_base]
lib_deps = 
	jgromes/RadioLib@7.3.0

[device-ui_base]
lib_deps = 
	https://github.com/meshtastic/device-ui/archive/9ed5355a24059750e9b2eb5d669574d9ea42a37b.zip

[environmental_base]
lib_deps = 
	lewisxhe/PCF8563_Library@^1.0.1
	adafruit/Adafruit BusIO@1.17.4
	adafruit/Adafruit Unified Sensor@1.1.15
	adafruit/Adafruit BMP280 Library@2.6.8
	adafruit/Adafruit BMP085 Library@1.2.4
	adafruit/Adafruit BME280 Library@2.3.0
	adafruit/Adafruit DPS310@1.1.5
	adafruit/Adafruit MCP9808 Library@2.0.2
	adafruit/Adafruit INA260 Library@1.5.3
	adafruit/Adafruit PM25 AQI Sensor@2.0.0
	adafruit/Adafruit MPU6050@2.2.6
	adafruit/Adafruit LIS3DH@1.3.0
	adafruit/Adafruit AHTX0@2.0.5
	adafruit/Adafruit LSM6DS@4.7.4
	adafruit/Adafruit TSL2591 Library@1.4.5
	emotibit/EmotiBit MLX90632@1.0.8
	adafruit/Adafruit MLX90614 Library@2.1.5
	https://github.com/sgtwilko/INA3221#bb03d7e9bfcc74fc798838a54f4f99738f29fc6a
	mprograms/QMC5883LCompass@1.2.3
	dfrobot/DFRobot_RTU@1.0.3
	https://github.com/DFRobot/DFRobot_RainfallSensor/archive/38fea5e02b40a5430be6dab39a99a6f6347d667e.zip
	robtillaart/INA226@0.6.4
	sparkfun/SparkFun MAX3010x Pulse and Proximity Sensor Library@1.1.2
	sparkfun/SparkFun 9DoF IMU Breakout - ICM 20948 - Arduino Library@1.3.2
	adafruit/Adafruit LTR390 Library@1.1.2
	adafruit/Adafruit PCT2075@1.0.5
	dfrobot/DFRobot_BMM150@1.0.0
	adafruit/Adafruit TSL2561@1.1.2

[environmental_extra]
lib_deps = 
	adafruit/Adafruit BMP3XX Library@2.1.6
	adafruit/Adafruit MAX1704X@1.0.3
	adafruit/Adafruit SHTC3 Library@1.0.2
	adafruit/Adafruit LPS2X@2.0.6
	adafruit/Adafruit SHT31 Library@2.2.2
	adafruit/Adafruit VEML7700 Library@2.1.6
	adafruit/Adafruit SHT4x Library@1.0.5
	sparkfun/SparkFun Qwiic Scale NAU7802 Arduino Library@1.0.6
	ClosedCube OPT3001@1.1.2
	boschsensortec/bsec2@1.10.2610
	boschsensortec/BME68x Sensor Library@1.3.40408
	https://github.com/meshtastic/DFRobot_LarkWeatherStation/archive/4de3a9cadef0f6a5220a8a906cf9775b02b0040d.zip
	sensirion/Sensirion Core@0.7.1
	sensirion/Sensirion I2C SCD4x@1.1.0

[esp32_base]
extends = arduino_base
custom_esp32_kind = esp32
platform = 
	platformio/espressif32@6.5.0
build_src_filter = 
	${arduino_base.build_src_filter} -<platform/nrf52/> -<platform/stm32wl> -<platform/rp2xx0> -<mesh/eth/> -<mesh/raspihttp>
upload_speed = 921600
debug_init_break = tbreak setup
monitor_filters = esp32_exception_decoder
board_build.filesystem = littlefs
build_unflags = -fno-lto
build_flags = 
	${arduino_base.build_flags}
	-flto
	-Wall
	-Wextra
	-Isrc/platform/esp32
	-std=c++11
	-DLOG_LOCAL_LEVEL=ESP_LOG_DEBUG
	-DCORE_DEBUG_LEVEL=ARDUHAL_LOG_LEVEL_DEBUG
	-DMYNEWT_VAL_BLE_HS_LOG_LVL=LOG_LEVEL_CRITICAL
	-DAXP_DEBUG_PORT=Serial
	-DCONFIG_BT_NIMBLE_ENABLED
	-DCONFIG_NIMBLE_CPP_LOG_LEVEL=2
	-DCONFIG_BT_NIMBLE_MAX_CCCDS=20
	-DCONFIG_BT_NIMBLE_HOST_TASK_STACK_SIZE=8192
	-DESP_OPENSSL_SUPPRESS_LEGACY_WARNING
	-DSERIAL_BUFFER_SIZE=4096
	-DSERIAL_HAS_ON_RECEIVE
	-DLIBPAX_ARDUINO
	-DLIBPAX_WIFI
	-DLIBPAX_BLE
	-DHAS_UDP_MULTICAST=1
lib_deps = 
	${arduino_base.lib_deps}
	${networking_base.lib_deps}
	${environmental_base.lib_deps}
	${environmental_extra.lib_deps}
	${radiolib_base.lib_deps}
	https://github.com/meshtastic/esp32_https_server/archive/3223704846752e6d545139204837bdb2a55459ca.zip
	h2zero/NimBLE-Arduino@^1.4.3
	https://github.com/dbinfrago/libpax/archive/3cdc0371c375676a97967547f4065607d4c53fd1.zip
	https://github.com/lewisxhe/XPowersLib/archive/v0.3.0.zip
	https://github.com/meshtastic/ESP32_Codec2/archive/633326c78ac251c059ab3a8c430fcdf25b41672f.zip
	rweather/Crypto@0.4.0
lib_ignore = 
	segger_rtt
	ESP32 BLE Arduino
board_build.partitions = partition-table.csv

[esp32c3_base]
extends = esp32_base
custom_esp32_kind = esp32c3
monitor_speed = 115200
monitor_filters = esp32_c3_exception_decoder

[esp32c6_base]
extends = esp32_base
platform = 
	https://github.com/Jason2866/platform-espressif32/archive/22faa566df8c789000f8136cd8d0aca49617af55.zip
build_flags = 
	${arduino_base.build_flags}
	-Wall
	-Wextra
	-Isrc/platform/esp32
	-std=c++11
	-DESP_OPENSSL_SUPPRESS_LEGACY_WARNING
	-DSERIAL_BUFFER_SIZE=4096
	-DLIBPAX_ARDUINO
	-DLIBPAX_WIFI
	-DLIBPAX_BLE
	-DMESHTASTIC_EXCLUDE_WEBSERVER
	-DHAS_BLUETOOTH=0
	-DMESHTASTIC_EXCLUDE_PAXCOUNTER
	-DMESHTASTIC_EXCLUDE_BLUETOOTH
lib_deps = 
	${arduino_base.lib_deps}
	${networking_base.lib_deps}
	${environmental_base.lib_deps}
	${environmental_extra.lib_deps}
	${radiolib_base.lib_deps}
	lewisxhe/XPowersLib@0.3.0
	https://github.com/meshtastic/ESP32_Codec2/archive/633326c78ac251c059ab3a8c430fcdf25b41672f.zip
	rweather/Crypto@0.4.0
build_src_filter = 
	${esp32_base.build_src_filter} -<mesh/http>
monitor_speed = 460800
monitor_filters = esp32_c3_exception_decoder
lib_ignore = 
	NonBlockingRTTTL
	NimBLE-Arduino
	libpax

[esp32s2_base]
extends = esp32_base
custom_esp32_kind = esp32s2
build_src_filter = 
	${esp32_base.build_src_filter} - <libpax/> -<nimble/> -<mesh/raspihttp>
monitor_speed = 115200
build_flags = 
	${esp32_base.build_flags}
	-DHAS_BLUETOOTH=0
	-DMESHTASTIC_EXCLUDE_PAXCOUNTER
	-DMESHTASTIC_EXCLUDE_BLUETOOTH
lib_ignore = 
	${esp32_base.lib_ignore}
	NimBLE-Arduino
	libpax

[esp32s3_base]
extends = esp32_base
custom_esp32_kind = esp32s3
monitor_speed = 115200

[nrf52_base]
platform = 
	platformio/nordicnrf52@^10.8.0
extends = arduino_base
platform_packages = 
	platformio/framework-arduinoadafruitnrf52 @ https://github.com/meshtastic/Adafruit_nRF52_Arduino#e13f5820002a4fb2a5e6754b42ace185277e5adf
	platformio/toolchain-gccarmnoneeabi@~1.90301.0
build_type = debug
build_flags = 
	-include arch/nrf52/cpp_overrides/lfs_util.h
	${arduino_base.build_flags}
	-DSERIAL_BUFFER_SIZE=1024
	-Wno-unused-variable
	-Isrc/platform/nrf52
	-DLFS_NO_ASSERT
	-DMESHTASTIC_EXCLUDE_AUDIO=1
	-DMESHTASTIC_EXCLUDE_PAXCOUNTER=1
build_src_filter = 
	${arduino_base.build_src_filter} -<platform/esp32/> -<platform/stm32wl> -<nimble/> -<mesh/wifi/> -<mesh/api/> -<mesh/http/> -<modules/esp32> -<platform/rp2xx0> -<mesh/eth/> -<mesh/raspihttp> -<serialization/>
lib_deps = 
	${arduino_base.lib_deps}
	${radiolib_base.lib_deps}
	rweather/Crypto@0.4.0
lib_ignore = 
	BluetoothOTA
	lvgl

[nrf52832_base]
extends = nrf52_base
build_flags = ${nrf52_base.build_flags}
lib_deps = 
	${nrf52_base.lib_deps}

[nrf52840_base]
extends = nrf52_base
build_flags = ${nrf52_base.build_flags}
lib_deps = 
	${nrf52_base.lib_deps}
	${environmental_base.lib_deps}
	${environmental_extra.lib_deps}
	https://github.com/Kongduino/Adafruit_nRFCrypto/archive/5f838d2709461a2c981f642917aa50254a25c14c.zip
debug_init_break = tbreak setup
debug_extra_cmds = 
	echo Running .gdbinit script
	commands 1
	set useSoftDevice = 0
	end
debug_load_mode = modified
debug_tool = stlink
debug_speed = 4000

[portduino_base]
platform = 
	https://github.com/meshtastic/platform-native/archive/d3f6e339534233c7217818867368767590ce549e.zip
framework = arduino
build_src_filter = 
	${env.build_src_filter}
	-<platform/esp32/>
	-<nimble/>
	-<platform/nrf52/>
	-<platform/stm32wl/>
	-<platform/rp2xx0>
	-<mesh/wifi/>
	-<mesh/http/>
	+<mesh/raspihttp/>
	-<mesh/eth/>
	-<modules/esp32>
lib_deps = 
	${env.lib_deps}
	${networking_base.lib_deps}
	${radiolib_base.lib_deps}
	${environmental_base.lib_deps}
	rweather/Crypto@0.4.0
	lovyan03/LovyanGFX@^1.2.0
	https://github.com/pine64/libch341-spi-userspace/archive/af9bc27c9c30fa90772279925b7c5913dff789b4.zip
	adafruit/Adafruit seesaw Library@1.7.9
	https://github.com/RAKWireless/RAK12034-BMX160/archive/dcead07ffa267d3c906e9ca4a1330ab989e957e2.zip
build_flags = 
	${arduino_base.build_flags}
	-D ARCH_PORTDUINO
	-fPIC
	-Isrc/platform/portduino
	-DRADIOLIB_EEPROM_UNSUPPORTED
	-DPORTDUINO_LINUX_HARDWARE
	-DHAS_UDP_MULTICAST=1
	-lpthread
	-lstdc++fs
	-lbluetooth
	-lgpiod
	-lyaml-cpp
	-li2c
	-luv
	-std=gnu17
	-std=c++17
lib_ignore = 
	Adafruit NeoPixel
	Adafruit ST7735 and ST7789 Library
	SD

[rp2040_base]
platform = 
	https://github.com/maxgerhardt/platform-raspberrypi#76ecf3c7e9dd4503af0331154c4ca1cddc4b03e5
extends = arduino_base
platform_packages = 
	framework-arduinopico@https://github.com/earlephilhower/arduino-pico#4.4.3
board_build.core = earlephilhower
board_build.filesystem_size = 0.5m
build_flags = 
	${arduino_base.build_flags} -Wno-unused-variable -Wcast-align
	-Isrc/platform/rp2xx0
	-Isrc/platform/rp2xx0/hardware_rosc/include
	-Isrc/platform/rp2xx0/pico_sleep/include
	-D__PLAT_RP2040__
build_src_filter = 
	${arduino_base.build_src_filter} -<platform/esp32/> -<nimble/> -<modules/esp32> -<platform/nrf52/> -<platform/stm32wl> -<mesh/eth/> -<mesh/wifi/> -<mesh/http/> -<mesh/raspihttp>
lib_ignore = 
	BluetoothOTA
	lvgl
lib_deps = 
	${arduino_base.lib_deps}
	${environmental_base.lib_deps}
	${environmental_extra.lib_deps}
	${radiolib_base.lib_deps}
	rweather/Crypto@0.4.0

[rp2350_base]
platform = 
	https://github.com/maxgerhardt/platform-raspberrypi#76ecf3c7e9dd4503af0331154c4ca1cddc4b03e5
extends = arduino_base
platform_packages = 
	framework-arduinopico@https://github.com/earlephilhower/arduino-pico#4.4.3
board_build.core = earlephilhower
board_build.filesystem_size = 0.5m
build_flags = 
	${arduino_base.build_flags} -Wno-unused-variable -Wcast-align
	-Isrc/platform/rp2xx0
	-D__PLAT_RP2350__
build_src_filter = 
	${arduino_base.build_src_filter} -<platform/esp32/> -<nimble/> -<modules/esp32> -<platform/nrf52/> -<platform/stm32wl> -<mesh/eth/> -<mesh/wifi/> -<mesh/http/> -<mesh/raspihttp> -<platform/rp2xx0/pico_sleep> -<platform/rp2xx0/hardware_rosc>
lib_ignore = 
	BluetoothOTA
	lvgl
lib_deps = 
	${arduino_base.lib_deps}
	${environmental_base.lib_deps}
	${environmental_extra.lib_deps}
	${radiolib_base.lib_deps}
	rweather/Crypto@0.4.0

[stm32_base]
extends = arduino_base
platform = 
	platformio/ststm32@19.3.0
platform_packages = 
	platformio/framework-arduinoststm32@https://github.com/stm32duino/Arduino_Core_STM32/archive/2.10.1.zip
extra_scripts = 
	${env.extra_scripts}
	post:extra_scripts/extra_stm32.py
build_type = release
build_flags = 
	${arduino_base.build_flags}
	-flto
	-Isrc/platform/stm32wl -g
	-DMESHTASTIC_EXCLUDE_AUDIO=1
	-DMESHTASTIC_EXCLUDE_ATAK=1
	-DMESHTASTIC_EXCLUDE_INPUTBROKER=1
	-DMESHTASTIC_EXCLUDE_POWERMON=1
	-DMESHTASTIC_EXCLUDE_SCREEN=1
	-DMESHTASTIC_EXCLUDE_MQTT=1
	-DMESHTASTIC_EXCLUDE_BLUETOOTH=1
	-DMESHTASTIC_EXCLUDE_WIFI=1
	-DMESHTASTIC_EXCLUDE_TZ=1
	-DSERIAL_RX_BUFFER_SIZE=256
	-DHAS_SCREEN=0
	-DPIO_FRAMEWORK_ARDUINO_NANOLIB_FLOAT_PRINTF
	-DDEBUG_MUTE
	-fmerge-all-constants
	-ffunction-sections
	-fdata-sections
	-DRADIOLIB_EXCLUDE_SX128X=1
	-DRADIOLIB_EXCLUDE_SX127X=1
	-DRADIOLIB_EXCLUDE_LR11X0=1
	-DHAL_DAC_MODULE_ONLY
	-DHAL_RNG_MODULE_ENABLED
build_src_filter = 
	${arduino_base.build_src_filter} -<platform/esp32/> -<nimble/> -<mesh/api/> -<mesh/wifi/> -<mesh/http/> -<modules/esp32> -<mesh/eth/> -<input> -<buzz> -<modules/RemoteHardwareModule.cpp> -<platform/nrf52> -<platform/portduino> -<platform/rp2xx0> -<mesh/raspihttp>
board_upload.offset_address = 0x08000000
upload_protocol = stlink
debug_tool = stlink
lib_deps = 
	${env.lib_deps}
	${radiolib_base.lib_deps}
	
	https://github.com/caveman99/Crypto/archive/1aa30eb536bd52a576fde6dfa393bf7349cf102d.zip
lib_ignore = 
	OneButton

[env:betafpv_2400_tx_micro]
extends = esp32_base
board = esp32doit-devkit-v1
board_level = extra
build_flags = 
	${esp32_base.build_flags}
	-D BETAFPV_2400_TX
	-D VTABLES_IN_FLASH=1
	-D CONFIG_DISABLE_HAL_LOCKS=1
	-O2
	-I variants/esp32/betafpv_2400_tx_micro
board_build.f_cpu = 240000000L
upload_protocol = esptool
upload_speed = 460800
lib_deps = 
	${esp32_base.lib_deps}
	adafruit/Adafruit NeoPixel @ ^1.12.0

[env:betafpv_900_tx_nano]
extends = esp32_base
board = esp32doit-devkit-v1
board_level = extra
build_flags = 
	${esp32_base.build_flags}
	-D BETAFPV_900_TX_NANO
	-D VTABLES_IN_FLASH=1
	-D CONFIG_DISABLE_HAL_LOCKS=1
	-O2
	-I variants/esp32/betafpv_900_tx_nano
board_build.f_cpu = 240000000L
upload_protocol = esptool
upload_speed = 460800
lib_deps = 
	${esp32_base.lib_deps}

[env:chatter2]
extends = esp32_base
board = esp32doit-devkit-v1
build_flags = 
	${esp32_base.build_flags}
	-D CHATTER_2
	-I variants/esp32/chatter2
lib_deps = 
	${esp32_base.lib_deps}
	lovyan03/LovyanGFX@^1.2.0

[env:hackerboxes-esp32-io]
extends = esp32_base
board = esp32dev
board_level = extra
build_flags = 
	${esp32_base.build_flags}
	-D PRIVATE_HW
	-I variants/esp32/hackerboxes_esp32_io
monitor_speed = 115200
upload_protocol = esptool
upload_speed = 921600
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:heltec-v1]
extends = esp32_base
board_level = extra
board = heltec_wifi_lora_32
build_flags = 
	${esp32_base.build_flags}
	-D HELTEC_V1
	-I variants/esp32/heltec_v1
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:heltec-v2_0]
board_level = extra
extends = esp32_base
board = heltec_wifi_lora_32_V2
build_flags = 
	${esp32_base.build_flags}
	-D HELTEC_V2_0
	-I variants/esp32/heltec_v2
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:heltec-v2_1]
board_level = extra
extends = esp32_base
board = heltec_wifi_lora_32_V2
build_flags = 
	${esp32_base.build_flags}
	-D HELTEC_V2_1
	-I variants/esp32/heltec_v2.1
	-DGPS_POWER_TOGGLE
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:heltec-wireless-bridge]
extends = esp32_base
board_level = extra
board = heltec_wifi_lora_32
build_flags = 
	${esp32_base.build_flags}
	-I variants/esp32/heltec_wireless_bridge
	-D HELTEC_WIRELESS_BRIDGE
	-D BOARD_HAS_PSRAM
	-D RADIOLIB_EXCLUDE_LR11X0=1
	-D RADIOLIB_EXCLUDE_SX128X=1
	-D MESHTASTIC_EXCLUDE_CANNEDMESSAGES=1
	-D MESHTASTIC_EXCLUDE_DETECTIONSENSOR=1
	-D MESHTASTIC_EXCLUDE_ENVIRONMENTAL_SENSOR=1
	-D MESHTASTIC_EXCLUDE_ENVIRONMENTAL_SENSOR_EXTERNAL=1
	-D MESHTASTIC_EXCLUDE_EXTERNALNOTIFICATION=1
	-D MESHTASTIC_EXCLUDE_GPS=1
	-D MESHTASTIC_EXCLUDE_I2C=1
	-D MESHTASTIC_EXCLUDE_INPUTBROKER=1
	-D MESHTASTIC_EXCLUDE_POWER_FSM=1
	-D MESHTASTIC_EXCLUDE_SERIAL=1
	-D MESHTASTIC_EXCLUDE_SCREEN=1
	-D MESHTASTIC_EXCLUDE_WAYPOINT=1
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:heltec-wsl-v2_1]
extends = esp32_base
board = heltec_wireless_stick_lite
board_level = extra
build_flags = 
	${esp32_base.build_flags}
	-D PRIVATE_HW
	-I variants/esp32/heltec_wsl_v2.1
	-DGPS_POWER_TOGGLE
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:m5stack-core]
extends = esp32_base
board = m5stack-core-esp32
monitor_filters = esp32_exception_decoder
build_src_filter = 
	${esp32_base.build_src_filter}
build_flags = 
	${esp32_base.build_flags}
	-I variants/esp32/m5stack_core
	-DILI9341_DRIVER
	-DM5STACK
	-DUSER_SETUP_LOADED
	-DTFT_SDA_READ
	-DTFT_DRIVER=0x9341
	-DTFT_MISO=19
	-DTFT_MOSI=23
	-DTFT_SCLK=18
	-DTFT_CS=14
	-DTFT_DC=27
	-DTFT_RST=33
	-DTFT_BL=32
	-DSPI_FREQUENCY=40000000
	-DSPI_READ_FREQUENCY=16000000
	-DDISABLE_ALL_LIBRARY_WARNINGS
lib_ignore = 
	m5stack-core
lib_deps = 
	${esp32_base.lib_deps}
	lovyan03/LovyanGFX@^1.2.0

[env:m5stack-coreink]
extends = esp32_base
board = m5stack-coreink
board_check = true
build_src_filter = 
	${esp32_base.build_src_filter}
build_flags = 
	${esp32_base.build_flags}
	-I variants/esp32/m5stack_coreink
	-Ofast
	-D__MCUXPRESSO
	-DEINK_DISPLAY_MODEL=GxEPD2_154_M09
	-DEINK_WIDTH=200
	-DEINK_HEIGHT=200
	-DUSER_SETUP_LOADED
	-DM5_COREINK
	-DM5STACK
lib_deps = 
	${esp32_base.lib_deps}
	zinggjm/GxEPD2@^1.6.2
	lewisxhe/PCF8563_Library@^1.0.1
lib_ignore = 
	m5stack-coreink
monitor_filters = esp32_exception_decoder
board_build.f_cpu = 240000000L
upload_protocol = esptool
upload_port = /dev/ttyACM0

[env:nano-g1]
extends = esp32_base
board = ttgo-t-beam
lib_deps = 
	${esp32_base.lib_deps}
build_flags = 
	${esp32_base.build_flags}
	-D NANO_G1
	-I variants/esp32/nano-g1

[env:nano-g1-explorer]
extends = esp32_base
board = ttgo-t-beam
lib_deps = 
	${esp32_base.lib_deps}
build_flags = 
	${esp32_base.build_flags}
	-D NANO_G1_EXPLORER
	-I variants/esp32/nano-g1-explorer

[env:radiomaster_900_bandit]
extends = esp32_base
board = esp32doit-devkit-v1
build_flags = 
	${esp32_base.build_flags}
	-DRADIOMASTER_900_BANDIT
	-DVTABLES_IN_FLASH=1
	-DCONFIG_DISABLE_HAL_LOCKS=1
	-DHAS_STK8XXX=1
	-O2
	-I variants/esp32/radiomaster_900_bandit
board_build.f_cpu = 240000000L
upload_protocol = esptool
lib_deps = 
	${esp32_base.lib_deps}
	https://github.com/gjelsoe/STK8xxx-Accelerometer/archive/v0.1.1.zip

[env:radiomaster_900_bandit_micro]
extends = esp32_base
board = esp32doit-devkit-v1
build_flags = 
	${esp32_base.build_flags}
	-DRADIOMASTER_900_BANDIT_NANO
	-DVTABLES_IN_FLASH=1
	-DCONFIG_DISABLE_HAL_LOCKS=1
	-O2
	-I variants/esp32/radiomaster_900_bandit_nano
board_build.f_cpu = 240000000L
upload_protocol = esptool
lib_deps = 
	${esp32_base.lib_deps}

[env:radiomaster_900_bandit_nano]
extends = esp32_base
board = esp32doit-devkit-v1
build_flags = 
	${esp32_base.build_flags}
	-DRADIOMASTER_900_BANDIT_NANO
	-DVTABLES_IN_FLASH=1
	-DCONFIG_DISABLE_HAL_LOCKS=1
	-O2
	-I variants/esp32/radiomaster_900_bandit_nano
board_build.f_cpu = 240000000L
upload_protocol = esptool
lib_deps = 
	${esp32_base.lib_deps}

[env:rak11200]
extends = esp32_base
board = wiscore_rak11200
board_level = pr
board_check = true
build_flags = 
	${esp32_base.build_flags}
	-D RAK_11200
	-I variants/esp32/rak11200
upload_speed = 115200
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:station-g1]
extends = esp32_base
board = ttgo-t-beam
lib_deps = 
	${esp32_base.lib_deps}
build_flags = 
	${esp32_base.build_flags}
	-D STATION_G1
	-I variants/esp32/station-g1

[env:tbeam]
extends = esp32_base
board = ttgo-t-beam
board_level = pr
board_check = true
lib_deps = 
	${esp32_base.lib_deps}
build_flags = 
	${esp32_base.build_flags}
	-D TBEAM_V10
	-I variants/esp32/tbeam
	-DGPS_POWER_TOGGLE
	-DBOARD_HAS_PSRAM
	-mfix-esp32-psram-cache-issue
upload_speed = 921600

[env:tbeam0_7]
board_level = extra
extends = esp32_base
board = ttgo-t-beam
build_flags = 
	${esp32_base.build_flags}
	-D TBEAM_V07
	-I variants/esp32/tbeam_v07
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:tlora-v1]
board_level = extra
extends = esp32_base
board = ttgo-lora32-v1
build_flags = 
	${esp32_base.build_flags}
	-D TLORA_V1
	-I variants/esp32/tlora_v1
upload_speed = 115200
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:tlora_v1_3]
board_level = extra
extends = esp32_base
board = ttgo-lora32-v1
build_flags = 
	${esp32_base.build_flags} -D TLORA_V1_3 -I variants/esp32/tlora_v1_3
upload_speed = 115200
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:tlora-v2]
board_level = extra
extends = esp32_base
board = ttgo-lora32-v1
build_flags = 
	${esp32_base.build_flags}
	-D TLORA_V2
	-I variants/esp32/tlora_v2
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:tlora-v2-1-1_6]
extends = esp32_base
board = ttgo-lora32-v21
board_check = true
build_flags = 
	${esp32_base.build_flags} -D TLORA_V2_1_16 -I variants/esp32/tlora_v2_1_16
	-DGPS_POWER_TOGGLE
upload_speed = 115200
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:tlora-v2-1-1_6-tcxo]
extends = esp32_base
board_level = extra
board = ttgo-lora32-v21
build_flags = 
	${esp32_base.build_flags}
	-D TLORA_V2_1_16
	-I variants/esp32/tlora_v2_1_16
	-D GPS_POWER_TOGGLE
	-D LORA_TCXO_GPIO=33
upload_speed = 115200
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:tlora-v2-1-1_8]
extends = esp32_base
board_level = extra
board = ttgo-lora32-v21
build_flags = 
	${esp32_base.build_flags}
	-D TLORA_V2_1_18
	-I variants/esp32/tlora_v2_1_18
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:tlora-v3-3-0-tcxo]
extends = esp32_base
board = ttgo-lora32-v21
build_flags = 
	${esp32_base.build_flags}
	-D TLORA_V2_1_16
	-I variants/esp32/tlora_v2_1_16
	-D GPS_POWER_TOGGLE
	-D LORA_TCXO_GPIO=12
	-D BUTTON_PIN=0
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:trackerd]
extends = esp32_base
board_level = extra
board = pico32
board_build.f_flash = 80000000L
build_flags = 
	${esp32_base.build_flags} -D PRIVATE_HW -I variants/esp32/trackerd -D BSFILE=\"boards/dragino_lbt2.h\"
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:wiphone]
extends = esp32_base
board = wiphone
board_level = extra
monitor_filters = esp32_exception_decoder
board_build.partitions = default_16MB.csv
build_flags = 
	${esp32_base.build_flags}
	-D WIPHONE
	-I variants/esp32/wiphone
lib_deps = 
	${esp32_base.lib_deps}
	lovyan03/LovyanGFX@^1.2.0
	sparkfun/SX1509 IO Expander@^3.0.5
	pololu/APA102@^3.0.0

[env:ai-c3]
extends = esp32c3_base
board = esp32-c3-devkitm-1
board_level = extra
build_flags = 
	${esp32c3_base.build_flags}
	-D PRIVATE_HW
	-I variants/esp32c3/ai-c3
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:hackerboxes-esp32c3-oled]
extends = esp32c3_base
board = esp32-c3-devkitm-1
board_level = extra
build_flags = 
	${esp32_base.build_flags}
	-D PRIVATE_HW
	-D ARDUINO_USB_MODE=1
	-D ARDUINO_USB_CDC_ON_BOOT=1
	-I variants/esp32c3/hackerboxes_esp32c3_oled
monitor_speed = 115200
upload_protocol = esptool
upload_speed = 921600
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:heltec-ht62-esp32c3-sx1262]
extends = esp32c3_base
board = esp32-c3-devkitm-1
board_level = pr
build_flags = 
	${esp32_base.build_flags}
	-D HELTEC_HT62
	-I variants/esp32c3/heltec_esp32c3
monitor_speed = 115200
upload_protocol = esptool
upload_speed = 921600
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:heltec-hru-3601]
extends = esp32c3_base
board = adafruit_qtpy_esp32c3
build_flags = 
	${esp32_base.build_flags}
	-D HELTEC_HRU_3601
	-I variants/esp32c3/heltec_hru_3601
lib_deps = ${esp32c3_base.lib_deps}
	adafruit/Adafruit NeoPixel @ ^1.12.0

[env:m5stack-stamp-c3]
extends = esp32c3_base
board = esp32-c3-devkitm-1
board_level = extra
build_flags = 
	${esp32_base.build_flags}
	-D PRIVATE_HW
	-I variants/esp32c3/m5stack-stamp-c3
monitor_speed = 115200
upload_protocol = esptool
upload_speed = 921600
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:m5stack-unitc6l]
extends = esp32c6_base
board = esp32-c6-devkitc-1
upload_protocol = esptool
build_unflags = 
	-D HAS_BLUETOOTH
	-D MESHTASTIC_EXCLUDE_BLUETOOTH
	-D HAS_WIFI
lib_deps = 
	${esp32c6_base.lib_deps}
	adafruit/Adafruit NeoPixel@^1.12.3
	h2zero/NimBLE-Arduino@^2.3.6
build_flags = 
	${esp32c6_base.build_flags}
	-D M5STACK_UNITC6L
	-I variants/esp32c6/m5stack_unitc6l
	-DMESHTASTIC_EXCLUDE_PAXCOUNTER=1
	-DARDUINO_USB_CDC_ON_BOOT=1
	-DARDUINO_USB_MODE=1
	-D HAS_BLUETOOTH=1
	-D MESHTASTIC_EXCLUDE_WEBSERVER
	-D MESHTASTIC_EXCLUDE_MQTT
	-DCONFIG_BT_NIMBLE_EXT_ADV=1
	-DCONFIG_BT_NIMBLE_MAX_EXT_ADV_INSTANCES=2
	-D NIMBLE_TWO
monitor_speed = 115200
lib_ignore = 
	NonBlockingRTTTL
	libpax
build_src_filter = 
	${esp32c6_base.build_src_filter} +<../variants/esp32c6/m5stack_unitc6l>

[env:tlora-c6]
extends = esp32c6_base
board = esp32-c6-devkitm-1
board_level = pr
build_flags = 
	${esp32c6_base.build_flags}
	-D TLORA_C6
	-I variants/esp32c6/tlora_c6
	-DARDUINO_USB_CDC_ON_BOOT=1
	-DARDUINO_USB_MODE=1
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:nugget-s2-lora]
extends = esp32s2_base
board = lolin_s2_mini
board_level = extra
build_flags = 
	${esp32s2_base.build_flags}
	-D PRIVATE_HW
	-I variants/esp32s2/nugget_s2_lora
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:bpi_picow_esp32_s3]
extends = esp32s3_base
board = bpi_picow_esp32_s3
board_level = extra
upload_protocol = esptool
lib_deps = 
	${esp32_base.lib_deps}
	caveman99/ESP32 Codec2@^1.0.1
build_flags = 
	${esp32_base.build_flags}
	-D PRIVATE_HW
	-I variants/esp32s3/bpi_picow_esp32_s3

[env:CDEBYTE_EoRa-S3]
extends = esp32s3_base
board = CDEBYTE_EoRa-S3
build_flags = 
	${esp32s3_base.build_flags}
	-D CDEBYTE_EORA_S3
	-I variants/esp32s3/CDEBYTE_EoRa-S3
	-D GPS_POWER_TOGGLE
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:crowpanel-esp32s3-5-epaper]
extends = esp32s3_base
board_build.arduino.memory_type = qio_opi
board_build.flash_mode = qio
board_build.psram_type = opi
board_upload.flash_size = 8MB
board_upload.maximum_size = 8388608
board_build.partitions = default_8MB.csv
board = esp32-s3-devkitc-1
board_level = extra
upload_protocol = esptool
build_flags = 
	${esp32s3_base.build_flags}
	-D CROWPANEL_ESP32S3_5_EPAPER
	-I variants/esp32s3/crowpanel-esp32s3-5-epaper
	-D PRIVATE_HW
	-DBOARD_HAS_PSRAM
	-DGPS_POWER_TOGGLE
	-DEINK_DISPLAY_MODEL=GxEPD2_579_GDEY0579T93
	-DEINK_WIDTH=792
	-DEINK_HEIGHT=272
	-DUSE_EINK_DYNAMICDISPLAY
	-DEINK_LIMIT_FASTREFRESH=100
lib_deps = 
	${esp32s3_base.lib_deps}
	https://github.com/meshtastic/GxEPD2/archive/33db3fa8ee6fc47d160bdb44f8f127c9a9203a10.zip

[env:crowpanel-esp32s3-4-epaper]
extends = esp32s3_base
board_build.arduino.memory_type = qio_opi
board_build.flash_mode = qio
board_build.psram_type = opi
board_upload.flash_size = 8MB
board_upload.maximum_size = 8388608
board_build.partitions = default_8MB.csv
board = esp32-s3-devkitc-1
board_level = extra
upload_protocol = esptool
build_flags = 
	${esp32s3_base.build_flags}
	-D CROWPANEL_ESP32S3_4_EPAPER
	-I variants/esp32s3/crowpanel-esp32s3-5-epaper
	-D PRIVATE_HW
	-DBOARD_HAS_PSRAM
	-DGPS_POWER_TOGGLE
	-DEINK_DISPLAY_MODEL=GxEPD2_420_GYE042A87
	-DEINK_WIDTH=400
	-DEINK_HEIGHT=300
	-DUSE_EINK_DYNAMICDISPLAY
	-DEINK_LIMIT_FASTREFRESH=100
lib_deps = 
	${esp32s3_base.lib_deps}
	https://github.com/meshtastic/GxEPD2/archive/33db3fa8ee6fc47d160bdb44f8f127c9a9203a10.zip

[env:crowpanel-esp32s3-2-epaper]
extends = esp32s3_base
board_build.arduino.memory_type = qio_opi
board_build.flash_mode = qio
board_build.psram_type = opi
board_upload.flash_size = 8MB
board_upload.maximum_size = 8388608
board_build.partitions = default_8MB.csv
board = esp32-s3-devkitc-1
board_level = extra
upload_protocol = esptool
build_flags = 
	${esp32s3_base.build_flags}
	-D CROWPANEL_ESP32S3_2_EPAPER
	-I variants/esp32s3/crowpanel-esp32s3-5-epaper
	-D PRIVATE_HW
	-DBOARD_HAS_PSRAM
	-DGPS_POWER_TOGGLE
	-DEINK_DISPLAY_MODEL=GxEPD2_290_GDEY029T94
	-DEINK_WIDTH=296
	-DEINK_HEIGHT=128
	-DUSE_EINK_DYNAMICDISPLAY
	-DEINK_LIMIT_FASTREFRESH=100
lib_deps = 
	${esp32s3_base.lib_deps}
	https://github.com/meshtastic/GxEPD2/archive/33db3fa8ee6fc47d160bdb44f8f127c9a9203a10.zip

[env:dreamcatcher]
extends = esp32s3_base
board = esp32s3box
board_build.partitions = default_16MB.csv
board_level = extra
build_flags = 
	${esp32s3_base.build_flags}
	-D PRIVATE_HW
	-D OTHERNET_DC_REV=2301
	-I variants/esp32s3/dreamcatcher
	-D ARDUINO_USB_CDC_ON_BOOT=1
lib_deps = ${esp32s3_base.lib_deps}
	earlephilhower/ESP8266Audio@^1.9.9
	earlephilhower/ESP8266SAM@^1.0.1

[env:dreamcatcher-2206]
extends = esp32s3_base
board = esp32s3box
board_build.partitions = default_16MB.csv
board_level = extra
build_flags = 
	${esp32s3_base.build_flags}
	-D PRIVATE_HW
	-D OTHERNET_DC_REV=2206
	-I variants/esp32s3/dreamcatcher
	-D ARDUINO_USB_CDC_ON_BOOT=1
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:EBYTE_ESP32-S3]
extends = esp32s3_base
board = ESP32-S3-WROOM-1-N4
board_level = extra
build_flags = 
	${esp32s3_base.build_flags}
	-D EBYTE_ESP32_S3
	-I variants/esp32s3/EBYTE_ESP32-S3
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:thinknode_m2]
extends = esp32s3_base
board = ESP32-S3-WROOM-1-N4
build_flags = 
	${esp32s3_base.build_flags}
	-D ELECROW_ThinkNode_M2
	-I variants/esp32s3/ELECROW-ThinkNode-M2
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:thinknode_m5]
extends = esp32s3_base
board = ESP32-S3-WROOM-1-N4
build_flags = 
	${esp32s3_base.build_flags}
	-D ELECROW_ThinkNode_M5
	-I variants/esp32s3/ELECROW-ThinkNode-M5
	-DEINK_DISPLAY_MODEL=GxEPD2_154_D67
	-DEINK_WIDTH=200
	-DEINK_HEIGHT=200
	-DUSE_EINK_DYNAMICDISPLAY
	-DEINK_LIMIT_FASTREFRESH=10
	-DEINK_LIMIT_RATE_BACKGROUND_SEC=10
	-DEINK_LIMIT_RATE_RESPONSIVE_SEC=1
	-DEINK_BACKGROUND_USES_FAST
lib_deps = ${esp32s3_base.lib_deps}
	https://github.com/meshtastic/GxEPD2/archive/1655054ba298e0e29fc2044741940f927f9c2a43.zip
	lewisxhe/PCF8563_Library@^1.0.1

[crowpanel_base]
extends = esp32s3_base
board = crowpanel
board_check = true
upload_protocol = esptool
board_build.partitions = default_16MB.csv
build_flags = ${esp32s3_base.build_flags} -Os
	-I variants/esp32s3/elecrow_panel
	-D ELECROW_PANEL
	-D CONFIG_ARDUHAL_LOG_COLORS
	-D RADIOLIB_DEBUG_SPI=0
	-D RADIOLIB_DEBUG_PROTOCOL=0
	-D RADIOLIB_DEBUG_BASIC=0
	-D RADIOLIB_VERBOSE_ASSERT=0
	-D RADIOLIB_SPI_PARANOID=0
	-D MESHTASTIC_EXCLUDE_CANNEDMESSAGES=1
	-D MESHTASTIC_EXCLUDE_INPUTBROKER=1
	-D MESHTASTIC_EXCLUDE_WEBSERVER=1
	-D MESHTASTIC_EXCLUDE_SERIAL=1
	-D MESHTASTIC_EXCLUDE_SOCKETAPI=1
	-D MESHTASTIC_EXCLUDE_SCREEN=1
	-D CONFIG_DISABLE_HAL_LOCKS=1
	-D USE_PIN_BUZZER
	-D HAS_SCREEN=0
	-D HAS_TFT=1
	-D RAM_SIZE=6144
	-D LV_LVGL_H_INCLUDE_SIMPLE
	-D LV_CONF_INCLUDE_SIMPLE
	-D LV_COMP_CONF_INCLUDE_SIMPLE
	-D LV_USE_SYSMON=0
	-D LV_USE_PROFILER=0
	-D LV_USE_PERF_MONITOR=0
	-D LV_USE_MEM_MONITOR=0
	-D LV_USE_LOG=0
	-D LV_BUILD_TEST=0
	-D USE_LOG_DEBUG
	-D LOG_DEBUG_INC=\"DebugConfiguration.h\"
	-D USE_PACKET_API
	-D HAS_SDCARD
	-D SD_SPI_FREQUENCY=75000000
lib_deps = ${esp32s3_base.lib_deps}
	${device-ui_base.lib_deps}
	earlephilhower/ESP8266Audio@1.9.9
	earlephilhower/ESP8266SAM@1.0.1
	lovyan03/LovyanGFX@1.2.0
	hideakitai/TCA9534@0.1.1

[crowpanel_small_esp32s3_base]
extends = crowpanel_base
build_flags = 
	${crowpanel_base.build_flags}
	-D CROW_SELECT=1
	-D SDCARD_USE_SOFT_SPI
	-D SDCARD_CS=7
	-D SPI_DRIVER_SELECT=2
	-D LGFX_DRIVER_TEMPLATE
	-D LGFX_DRIVER=LGFX_GENERIC
	-D GFX_DRIVER_INC=\"graphics/LGFX/LGFX_GENERIC.h\"
	-D VIEW_320x240
	-D MAP_FULL_REDRAW

[crowpanel_large_esp32s3_base]
extends = crowpanel_base
build_flags = 
	${crowpanel_base.build_flags}
	-D CROW_SELECT=2
	-D SDCARD_CS=7
	-D LGFX_DRIVER=LGFX_ELECROW70
	-D GFX_DRIVER_INC=\"graphics/LGFX/LGFX_ELECROW70.h\"
	-D DISPLAY_SET_RESOLUTION

[env:elecrow-adv-24-28-tft]
extends = crowpanel_small_esp32s3_base
build_flags = 
	${crowpanel_small_esp32s3_base.build_flags}
	-D SPI_FREQUENCY=80000000
	-D LGFX_SCREEN_WIDTH=240
	-D LGFX_SCREEN_HEIGHT=320
	-D DISPLAY_SIZE=320x240
	-D LGFX_PANEL=ST7789
	-D LGFX_ROTATION=1
	-D LGFX_CFG_HOST=SPI2_HOST
	-D LGFX_PIN_SCK=42
	-D LGFX_PIN_MOSI=39
	-D LGFX_PIN_DC=41
	-D LGFX_PIN_CS=40
	-D LGFX_PIN_BL=38
	-D LGFX_TOUCH=FT5x06
	-D LGFX_TOUCH_I2C_ADDR=0x38
	-D LGFX_TOUCH_I2C_SDA=15
	-D LGFX_TOUCH_I2C_SCL=16
	-D LGFX_TOUCH_INT=47
	-D LGFX_TOUCH_RST=48
	-D LGFX_TOUCH_ROTATION=0
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:elecrow-adv-35-tft]
extends = crowpanel_small_esp32s3_base
board_level = pr
build_flags = 
	${crowpanel_small_esp32s3_base.build_flags}
	-D LV_CACHE_DEF_SIZE=2097152
	-D SPI_FREQUENCY=60000000
	-D LGFX_SCREEN_WIDTH=320
	-D LGFX_SCREEN_HEIGHT=480
	-D DISPLAY_SIZE=320x480
	-D LGFX_PANEL=ILI9488
	-D LGFX_ROTATION=0
	-D LGFX_CFG_HOST=SPI2_HOST
	-D LGFX_PIN_SCK=42
	-D LGFX_PIN_MOSI=39
	-D LGFX_PIN_DC=41
	-D LGFX_PIN_CS=40
	-D LGFX_PIN_BL=38
	-D LGFX_TOUCH=GT911
	-D LGFX_TOUCH_I2C_ADDR=0x5D
	-D LGFX_TOUCH_I2C_SDA=15
	-D LGFX_TOUCH_I2C_SCL=16
	-D LGFX_TOUCH_INT=47
	-D LGFX_TOUCH_RST=48
	-D LGFX_TOUCH_ROTATION=0
	-D DISPLAY_SET_RESOLUTION
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:elecrow-adv1-43-50-70-tft]
extends = crowpanel_large_esp32s3_base
build_flags = 
	${crowpanel_large_esp32s3_base.build_flags}
	-D VIEW_320x240
	-D DISPLAY_SIZE=800x480
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:ESP32-S3-Pico]
board_level = extra
extends = esp32s3_base
upload_protocol = esptool
board = esp32-s3-pico
board_build.partitions = default_16MB.csv
board_upload.use_1200bps_touch = yes
board_upload.wait_for_upload_port = yes
board_upload.require_upload_port = yes
build_flags = ${esp32s3_base.build_flags}
	-DESP32_S3_PICO
	-Ivariants/esp32s3/esp32-s3-pico
	-DBOARD_HAS_PSRAM
	-DEINK_DISPLAY_MODEL=GxEPD2_290_T94_V2
	-DEINK_WIDTH=296
	-DEINK_HEIGHT=128
lib_deps = ${esp32s3_base.lib_deps}
	zinggjm/GxEPD2@^1.6.2
	adafruit/Adafruit NeoPixel @ ^1.12.0

[env:heltec_capsule_sensor_v3]
extends = esp32s3_base
board = heltec_wifi_lora_32_V3
board_check = true
board_build.partitions = default_8MB.csv
build_flags = 
	${esp32s3_base.build_flags} -I variants/esp32s3/heltec_capsule_sensor_v3
	-D HELTEC_CAPSULE_SENSOR_V3
	-D GPS_POWER_TOGGLE
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:heltec_sensor_hub]
extends = esp32s3_base
board = heltec_wifi_lora_32_V3
board_check = true
build_flags = 
	${esp32s3_base.build_flags}
	-I variants/esp32s3/heltec_sensor_hub
	-D HELTEC_SENSOR_HUB
lib_deps = ${esp32s3_base.lib_deps}
	adafruit/Adafruit NeoPixel @ ^1.12.0

[env:heltec-v3]
extends = esp32s3_base
board = heltec_wifi_lora_32_V3
board_level = pr
board_check = true
board_build.partitions = default_8MB.csv
build_flags = 
	${esp32s3_base.build_flags}
	-D HELTEC_V3
	-I variants/esp32s3/heltec_v3
	-D GPS_POWER_TOGGLE
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:heltec-v4]
extends = esp32s3_base
board = heltec_v4
board_check = true
board_build.partitions = default_16MB.csv
build_flags = 
	${esp32s3_base.build_flags}
	-D HELTEC_V4
	-I variants/esp32s3/heltec_v4
	-D GPS_POWER_TOGGLE
	-D SX126X_MAX_POWER=11
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:heltec-vision-master-e213]
extends = esp32s3_base
board = heltec_vision_master_e213
board_build.partitions = default_8MB.csv
build_flags = 
	${esp32s3_base.build_flags}
	-Ivariants/esp32s3/heltec_vision_master_e213
	-DHELTEC_VISION_MASTER_E213
	-DUSE_EINK
	-DGXEPD2_DRIVER_0=GxEPD2_213_FC1
	-DGXEPD2_DRIVER_1=GxEPD2_213_E0213A367
	-DEINK_WIDTH=250
	-DEINK_HEIGHT=122
	-DUSE_EINK_DYNAMICDISPLAY
	-DEINK_LIMIT_FASTREFRESH=10
	-DEINK_BACKGROUND_USES_FAST
	-DEINK_HASQUIRK_GHOSTING
lib_deps = 
	${esp32s3_base.lib_deps}
	https://github.com/meshtastic/GxEPD2/archive/1655054ba298e0e29fc2044741940f927f9c2a43.zip
	lewisxhe/PCF8563_Library@^1.0.1
upload_speed = 115200

[env:heltec-vision-master-e213-inkhud]
extends = esp32s3_base, inkhud
board = heltec_vision_master_e213
board_level = pr
board_build.partitions = default_8MB.csv
build_src_filter = 
	${esp32_base.build_src_filter}
	${inkhud.build_src_filter}
build_flags = 
	${esp32s3_base.build_flags}
	${inkhud.build_flags}
	-I variants/esp32s3/heltec_vision_master_e213
	-D HELTEC_VISION_MASTER_E213
lib_deps = 
	${inkhud.lib_deps}
	${esp32s3_base.lib_deps}
upload_speed = 921600

[env:heltec-vision-master-e290]
extends = esp32s3_base
board = heltec_vision_master_e290
board_build.partitions = default_8MB.csv
build_flags = 
	${esp32s3_base.build_flags}
	-I variants/esp32s3/heltec_vision_master_e290
	-D DISPLAY_FLIP_SCREEN
	-D HELTEC_VISION_MASTER_E290
	-D BUTTON_CLICK_MS=200
	-D EINK_DISPLAY_MODEL=GxEPD2_290_BN8
	-D EINK_WIDTH=296
	-D EINK_HEIGHT=128
	-D USE_EINK
	-D USE_EINK_DYNAMICDISPLAY
	-D EINK_LIMIT_FASTREFRESH=10
	-D EINK_HASQUIRK_GHOSTING
lib_deps = 
	${esp32s3_base.lib_deps}
	https://github.com/meshtastic/GxEPD2/archive/448c8538129fde3d02a7cb5e6fc81971ad92547f.zip
	lewisxhe/PCF8563_Library@^1.0.1
upload_speed = 115200

[env:heltec-vision-master-e290-inkhud]
extends = esp32s3_base, inkhud
board = heltec_vision_master_e290
board_build.partitions = default_8MB.csv
build_src_filter = 
	${esp32_base.build_src_filter}
	${inkhud.build_src_filter}
build_flags = 
	${esp32s3_base.build_flags}
	${inkhud.build_flags}
	-I variants/esp32s3/heltec_vision_master_e290
	-D HELTEC_VISION_MASTER_E290
lib_deps = 
	${inkhud.lib_deps}
	${esp32s3_base.lib_deps}
upload_speed = 921600

[env:heltec-vision-master-t190]
extends = esp32s3_base
board = heltec_vision_master_t190
board_build.partitions = default_8MB.csv
build_flags = 
	${esp32s3_base.build_flags}
	-I variants/esp32s3/heltec_vision_master_t190
	-D HELTEC_VISION_MASTER_T190
lib_deps = 
	${esp32s3_base.lib_deps}
	lewisxhe/PCF8563_Library@^1.0.1
	https://github.com/meshtastic/st7789/archive/bd33ea58ddfe4a5e4a66d53300ccbd38d66ac21f.zip
upload_speed = 921600

[env:heltec-wireless-paper]
extends = esp32s3_base
board = heltec_wifi_lora_32_V3
board_build.partitions = default_8MB.csv
build_flags = 
	${esp32s3_base.build_flags}
	-I variants/esp32s3/heltec_wireless_paper
	-D HELTEC_WIRELESS_PAPER
	-D GXEPD2_DRIVER_0=GxEPD2_213_FC1
	-D GXEPD2_DRIVER_1=GxEPD2_213_E0213A367
	-D EINK_WIDTH=250
	-D EINK_HEIGHT=122
	-D USE_EINK
	-D USE_EINK_DYNAMICDISPLAY
	-D EINK_LIMIT_FASTREFRESH=10
	-D EINK_BACKGROUND_USES_FAST
	-D EINK_HASQUIRK_GHOSTING
lib_deps = 
	${esp32s3_base.lib_deps}
	https://github.com/meshtastic/GxEPD2/archive/1655054ba298e0e29fc2044741940f927f9c2a43.zip
	lewisxhe/PCF8563_Library@^1.0.1
upload_speed = 115200

[env:heltec-wireless-paper-inkhud]
extends = esp32s3_base, inkhud
board = heltec_wifi_lora_32_V3
board_build.partitions = default_8MB.csv
build_src_filter = 
	${esp32_base.build_src_filter}
	${inkhud.build_src_filter}
build_flags = 
	${esp32s3_base.build_flags}
	${inkhud.build_flags}
	-I variants/esp32s3/heltec_wireless_paper
	-D HELTEC_WIRELESS_PAPER
lib_deps = 
	${inkhud.lib_deps}
	${esp32s3_base.lib_deps}
upload_speed = 921600

[env:heltec-wireless-paper-v1_0]
extends = esp32s3_base
board_level = extra
board = heltec_wifi_lora_32_V3
board_build.partitions = default_8MB.csv
build_flags = 
	${esp32s3_base.build_flags}
	-I variants/esp32s3/heltec_wireless_paper_v1
	-D HELTEC_WIRELESS_PAPER_V1_0
	-D EINK_DISPLAY_MODEL=GxEPD2_213_BN
	-D EINK_WIDTH=250
	-D EINK_HEIGHT=122
	-D USE_EINK_DYNAMICDISPLAY
	-D EINK_LIMIT_FASTREFRESH=5
	-D EINK_LIMIT_GHOSTING_PX=2000
lib_deps = 
	${esp32s3_base.lib_deps}
	https://github.com/meshtastic/GxEPD2/archive/55f618961db45a23eff0233546430f1e5a80f63a.zip
	lewisxhe/PCF8563_Library@^1.0.1
upload_speed = 115200

[env:heltec-wireless-tracker]
extends = esp32s3_base
board = heltec_wireless_tracker
board_build.partitions = default_8MB.csv
upload_protocol = esptool
build_flags = 
	${esp32s3_base.build_flags}
	-I variants/esp32s3/heltec_wireless_tracker
	-D HELTEC_TRACKER_V1_1
	-D GPS_POWER_TOGGLE
lib_deps = 
	${esp32s3_base.lib_deps}
	lovyan03/LovyanGFX@^1.2.0

[env:heltec-wireless-tracker-V1-0]
extends = esp32s3_base
board_level = extra
board = heltec_wireless_tracker
board_build.partitions = default_8MB.csv
upload_protocol = esptool
build_flags = 
	${esp32s3_base.build_flags}
	-I variants/esp32s3/heltec_wireless_tracker_V1_0
	-D HELTEC_TRACKER_V1_0
	-D GPS_POWER_TOGGLE
lib_deps = 
	${esp32s3_base.lib_deps}
	lovyan03/LovyanGFX@^1.2.0

[env:heltec-wsl-v3]
extends = esp32s3_base
board = heltec_wifi_lora_32_V3
board_build.partitions = default_8MB.csv
build_flags = 
	${esp32s3_base.build_flags}
	-D HELTEC_WSL_V3
	-I variants/esp32s3/heltec_wsl_v3
	-D GPS_POWER_TOGGLE
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:icarus]
extends = esp32s3_base
board = icarus
board_level = extra
board_check = true
board_build.mcu = esp32s3
board_build.partitions = default_8MB.csv
upload_protocol = esptool
upload_speed = 921600
platform_packages = platformio/framework-arduinoespressif32@https://github.com/PowerFeather/powerfeather-meshtastic-arduino-lib/releases/download/2.0.16a/esp32-2.0.16.zip
lib_deps = 
	${esp32s3_base.lib_deps}
build_unflags = 
	${esp32s3_base.build_unflags}
	-DARDUINO_USB_MODE=1
build_flags = 
	${esp32s3_base.build_flags}
	-D PRIVATE_HW
	-I variants/esp32s3/icarus
	-DBOARD_HAS_PSRAM
	-DARDUINO_USB_MODE=0

[env:link32-s3-v1]
extends = esp32s3_base
board = esp32-s3-devkitc-1
build_flags = 
	${esp32_base.build_flags}
	-D LINK_32
	-I variants/esp32s3/link32_s3_v1
	-DGPS_POWER_TOGGLE
	-DARDUINO_USB_CDC_ON_BOOT
	-DARDUINO_USB_MODE=1
	-DRADIOLIB_EXCLUDE_SX128X=1
	-DRADIOLIB_EXCLUDE_SX127X=1
	-DRADIOLIB_EXCLUDE_LR11X0=1
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:m5stack-cores3]
extends = esp32s3_base
board = m5stack-cores3
board_check = true
board_build.partitions = default_16MB.csv
upload_protocol = esptool
build_flags = 
	${esp32_base.build_flags}
	-D PRIVATE_HW
	-D M5STACK_CORES3
	-I variants/esp32s3/m5stack_cores3
lib_deps = ${esp32_base.lib_deps}

[mesh_tab_base]
extends = esp32s3_base
board = mesh-tab
board_level = extra
board_upload.flash_size = 16MB
board_build.partitions = default_16MB.csv
upload_protocol = esptool
build_flags = ${esp32s3_base.build_flags}
	-D MESH_TAB
	-D CONFIG_ARDUHAL_ESP_LOG
	-D CONFIG_ARDUHAL_LOG_COLORS=1
	-D CONFIG_DISABLE_HAL_LOCKS=1
	-D MESHTASTIC_EXCLUDE_CANNEDMESSAGES=1
	-D MESHTASTIC_EXCLUDE_INPUTBROKER=1
	-D MESHTASTIC_EXCLUDE_WEBSERVER=1
	-D MESHTASTIC_EXCLUDE_SERIAL=1
	-D MESHTASTIC_EXCLUDE_SOCKETAPI=1
	-D MESHTASTIC_EXCLUDE_SCREEN=1
	-D CONFIG_DISABLE_HAL_LOCKS=1
	-D USE_PIN_BUZZER
	-D HAS_SCREEN=0
	-D HAS_TFT=1
	-D RAM_SIZE=1024
	-D LGFX_DRIVER_TEMPLATE
	-D LGFX_DRIVER=LGFX_GENERIC
	-D GFX_DRIVER_INC=\"graphics/LGFX/LGFX_GENERIC.h\"
	-D LGFX_PIN_SCK=12
	-D LGFX_PIN_MOSI=13
	-D LGFX_PIN_MISO=11

	-D LGFX_PIN_DC=16
	-D LGFX_PIN_CS=10
	-D LGFX_PIN_RST=-1
	-D LGFX_PIN_BL=42
	-D LGFX_TOUCH_INT=41
	-D VIEW_320x240
	-D USE_PACKET_API
	-I variants/esp32s3/mesh-tab
build_src_filter = ${esp32_base.build_src_filter}
lib_deps = 
	${esp32_base.lib_deps}
	${device-ui_base.lib_deps}
	lovyan03/LovyanGFX@^1.2.0

[mesh_tab_xpt2046]
extends = mesh_tab_base
build_flags = ${mesh_tab_base.build_flags}
	-D LGFX_TOUCH=XPT2046
	-D LGFX_TOUCH_SPI_FREQ=2500000
	-D LGFX_TOUCH_SPI_HOST=2
	-D LGFX_TOUCH_CS=7
	-D LGFX_TOUCH_CLK=12
	-D LGFX_TOUCH_DO=11
	-D LGFX_TOUCH_DIN=13
	-D LGFX_TOUCH_X_MIN=300
	-D LGFX_TOUCH_X_MAX=3900
	-D LGFX_TOUCH_Y_MIN=400
	-D LGFX_TOUCH_Y_MAX=3900

[mesh_tab_ft5x06]
extends = mesh_tab_base
build_flags = ${mesh_tab_base.build_flags}
	-D LGFX_TOUCH=FT5x06
	-D LGFX_TOUCH_I2C_FREQ=400000
	-D LGFX_TOUCH_I2C_PORT=0
	-D LGFX_TOUCH_I2C_ADDR=0x38
	-D LGFX_TOUCH_I2C_SDA=8
	-D LGFX_TOUCH_I2C_SCL=9
	-D LGFX_TOUCH_RST=7

[env:mesh-tab-3-2-TN-resistive]
extends = mesh_tab_base
build_flags = ${mesh_tab_xpt2046.build_flags}
	-D SPI_FREQUENCY=60000000
	-D LGFX_SCREEN_WIDTH=240
	-D LGFX_SCREEN_HEIGHT=320
	-D DISPLAY_SIZE=320x240
	-D LGFX_PANEL=ST7789
	-D LGFX_INVERT_COLOR=false
	-D LGFX_ROTATION=3
	-D LGFX_TOUCH_ROTATION=4
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:mesh-tab-3-2-IPS-resistive]
extends = mesh_tab_base
build_flags = ${mesh_tab_xpt2046.build_flags}
	-D SPI_FREQUENCY=60000000
	-D LGFX_SCREEN_WIDTH=240
	-D LGFX_SCREEN_HEIGHT=320
	-D DISPLAY_SIZE=320x240
	-D LGFX_PANEL=ILI9341
	-D LGFX_ROTATION=1
	-D LGFX_TOUCH_ROTATION=4
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:mesh-tab-3-5-IPS-resistive]
extends = mesh_tab_base
build_flags = ${mesh_tab_xpt2046.build_flags}
	-D SPI_FREQUENCY=60000000
	-D DISPLAY_SET_RESOLUTION
	-D LGFX_SCREEN_WIDTH=320
	-D LGFX_SCREEN_HEIGHT=480
	-D DISPLAY_SIZE=320x480
	-D LGFX_PANEL=ILI9488
	-D LGFX_ROTATION=0
	-D LGFX_TOUCH_ROTATION=0
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:mesh-tab-3-5-TN-resistive]
extends = mesh_tab_base
build_flags = ${mesh_tab_xpt2046.build_flags}
	-D SPI_FREQUENCY=60000000
	-D DISPLAY_SET_RESOLUTION
	-D LGFX_SCREEN_WIDTH=320
	-D LGFX_SCREEN_HEIGHT=480
	-D DISPLAY_SIZE=320x480
	-D LGFX_PANEL=HX8357B
	-D LGFX_INVERT_COLOR=false
	-D LGFX_ROTATION=4
	-D LGFX_TOUCH_ROTATION=2
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:mesh-tab-3-2-IPS-capacitive]
extends = mesh_tab_base
build_flags = ${mesh_tab_ft5x06.build_flags}
	-D SPI_FREQUENCY=75000000
	-D LGFX_SCREEN_WIDTH=240
	-D LGFX_SCREEN_HEIGHT=320
	-D DISPLAY_SIZE=320x240
	-D LGFX_PANEL=ILI9341
	-D LGFX_ROTATION=1
	-D LGFX_TOUCH_X_MIN=0
	-D LGFX_TOUCH_X_MAX=239
	-D LGFX_TOUCH_Y_MIN=0
	-D LGFX_TOUCH_Y_MAX=319
	-D LGFX_TOUCH_ROTATION=2
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:mesh-tab-3-5-IPS-capacitive]
extends = mesh_tab_base
build_flags = ${mesh_tab_ft5x06.build_flags}
	-D SPI_FREQUENCY=75000000
	-D DISPLAY_SET_RESOLUTION
	-D LGFX_SCREEN_WIDTH=320
	-D LGFX_SCREEN_HEIGHT=480
	-D DISPLAY_SIZE=320x480
	-D LGFX_PANEL=ILI9488
	-D LGFX_ROTATION=2
	-D LGFX_TOUCH_X_MIN=0
	-D LGFX_TOUCH_X_MAX=319
	-D LGFX_TOUCH_Y_MIN=0
	-D LGFX_TOUCH_Y_MAX=479
	-D LGFX_TOUCH_ROTATION=0
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:mesh-tab-4-0-IPS-capacitive]
extends = mesh_tab_base
build_flags = ${mesh_tab_ft5x06.build_flags}
	-D SPI_FREQUENCY=75000000
	-D DISPLAY_SET_RESOLUTION
	-D LGFX_SCREEN_WIDTH=320
	-D LGFX_SCREEN_HEIGHT=480
	-D DISPLAY_SIZE=320x480
	-D LGFX_PANEL=HX8357B
	-D LGFX_ROTATION=4
	-D LGFX_TOUCH_X_MIN=0
	-D LGFX_TOUCH_X_MAX=319
	-D LGFX_TOUCH_Y_MIN=0
	-D LGFX_TOUCH_Y_MAX=479
	-D LGFX_TOUCH_ROTATION=6
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:nibble-esp32]
extends = esp32s3_base
board = esp32-s3-zero
board_level = extra
build_flags = 
	${esp32_base.build_flags}
	-D PRIVATE_HW
	-I variants/esp32s3/nibble_esp32
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:nugget-s3-lora]
extends = esp32s3_base
board = lolin_s3_mini
board_level = extra
build_flags = 
	${esp32s3_base.build_flags} -D ARDUINO_USB_CDC_ON_BOOT=1 -D PRIVATE_HW -I variants/esp32s3/nugget_s3_lora
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:picomputer-s3]
extends = esp32s3_base
board = bpi_picow_esp32_s3
board_check = true
board_build.partitions = partition-table-8MB.csv
upload_protocol = esptool
build_flags = 
	${esp32s3_base.build_flags}
	-DPICOMPUTER_S3
	-I variants/esp32s3/picomputer-s3
lib_deps = 
	${esp32s3_base.lib_deps}
	lovyan03/LovyanGFX@^1.2.0
build_src_filter = 
	${esp32s3_base.build_src_filter}

[env:picomputer-s3-tft]
extends = env:picomputer-s3
build_flags = 
	${env:picomputer-s3.build_flags}
	-D MESHTASTIC_EXCLUDE_WEBSERVER=1
	-D INPUTDRIVER_MATRIX_TYPE=1
	-D USE_PIN_BUZZER=PIN_BUZZER
	-D USE_SX127x
	-D HAS_SCREEN=1
	-D HAS_TFT=1
	-D RAM_SIZE=1560
	-D LV_LVGL_H_INCLUDE_SIMPLE
	-D LV_CONF_INCLUDE_SIMPLE
	-D LV_COMP_CONF_INCLUDE_SIMPLE
	-D LV_USE_SYSMON=0
	-D LV_USE_PROFILER=0
	-D LV_USE_PERF_MONITOR=0
	-D LV_USE_MEM_MONITOR=0
	-D LV_USE_LOG=0
	-D USE_LOG_DEBUG
	-D LOG_DEBUG_INC=\"DebugConfiguration.h\"
	-D LGFX_SCREEN_WIDTH=240
	-D LGFX_SCREEN_HEIGHT=320
	-D DISPLAY_SIZE=320x240
	-D LGFX_DRIVER=LGFX_PICOMPUTER_S3
	-D GFX_DRIVER_INC=\"graphics/LGFX/LGFX_PICOMPUTER_S3.h\"
	-D VIEW_320x240
	-D USE_PACKET_API
lib_deps = 
	${env:picomputer-s3.lib_deps}
	${device-ui_base.lib_deps}

[env:rak3312]
extends = nrf52840_base
board = wiscore_rak3312
board_level = pr
board_check = true
upload_protocol = esptool
build_flags = 
	${nrf52840_base.build_flags}
	-D RAK3312
	-I variants/nrf52840/rak3312
lib_deps = bblanchon/ArduinoJson@^7.4.2

[rak_wismeshtap_s3]
extends = esp32s3_base
board = wiscore_rak3312
board_check = true
upload_protocol = esptool
board_build.partitions = default_8MB.csv
build_flags = 
	${esp32s3_base.build_flags}
	-D RAK3312
	-D RAK_WISMESH_TAP_V2
	-I variants/esp32s3/rak_wismesh_tap_v2
lib_deps = 
	${esp32s3_base.lib_deps}
	lovyan03/LovyanGFX@^1.2.0

[ft5x06]
extends = mesh_tab_base
build_flags = 
	-D LGFX_TOUCH=FT5x06
	-D LGFX_TOUCH_I2C_FREQ=100000
	-D LGFX_TOUCH_I2C_PORT=0
	-D LGFX_TOUCH_I2C_ADDR=0x38
	-D LGFX_TOUCH_I2C_SDA=9
	-D LGFX_TOUCH_I2C_SCL=40
	-D LGFX_TOUCH_RST=-1
	-D LGFX_TOUCH_INT=39

[env:rak_wismesh_tap_v2-tft]
extends = rak_wismeshtap_s3
build_flags = 
	${rak_wismeshtap_s3.build_flags}
	-D CONFIG_ARDUHAL_ESP_LOG
	-D CONFIG_ARDUHAL_LOG_COLORS=1
	-D CONFIG_DISABLE_HAL_LOCKS=1
	-D LV_LVGL_H_INCLUDE_SIMPLE
	-D LV_CONF_INCLUDE_SIMPLE
	-D LV_COMP_CONF_INCLUDE_SIMPLE
	-D LV_USE_SYSMON=0
	-D LV_USE_PROFILER=0
	-D LV_USE_PERF_MONITOR=0
	-D LV_USE_MEM_MONITOR=0
	-D LV_USE_LOG=0
	-D LV_BUILD_TEST=0
	-D USE_LOG_DEBUG
	-D LOG_DEBUG_INC=\"DebugConfiguration.h\"
	-D RADIOLIB_SPI_PARANOID=0
	-D INPUTDRIVER_BUTTON_TYPE=0
	-D HAS_SDCARD
	-D HAS_SCREEN=0
	-D HAS_TFT=1
	-D USE_PIN_BUZZER=PIN_BUZZER
	-D RAM_SIZE=5120
	-D LGFX_DRIVER_TEMPLATE
	-D LGFX_DRIVER=LGFX_GENERIC
	-D GFX_DRIVER_INC=\"graphics/LGFX/LGFX_GENERIC.h\"
	-D LGFX_PIN_SCK=13
	-D LGFX_PIN_MOSI=11
	-D LGFX_PIN_MISO=10
	-D LGFX_PIN_DC=42
	-D LGFX_PIN_CS=12
	-D LGFX_PIN_RST=-1
	-D LGFX_PIN_BL=41
	-D VIEW_320x240
	-D USE_PACKET_API
	${ft5x06.build_flags}
	-D LGFX_SCREEN_WIDTH=240
	-D LGFX_SCREEN_HEIGHT=320
	-D DISPLAY_SIZE=320x240
	-D LGFX_PANEL=ST7789
	-D LGFX_ROTATION=1
	-D LGFX_TOUCH_X_MIN=0
	-D LGFX_TOUCH_X_MAX=239
	-D LGFX_TOUCH_Y_MIN=0
	-D LGFX_TOUCH_Y_MAX=319
	-D LGFX_TOUCH_ROTATION=2
	-D LGFX_CFG_HOST=SPI3_HOST
	-D MAP_FULL_REDRAW=1
lib_deps = 
	${rak_wismeshtap_s3.lib_deps}
	${device-ui_base.lib_deps}

[env:seeed-sensecap-indicator]
extends = esp32s3_base
platform_packages = 
	platformio/framework-arduinoespressif32 @ https://github.com/mverch67/arduino-esp32/archive/aef7fef6de3329ed6f75512d46d63bba12b09bb5.zip
board = seeed-sensecap-indicator
board_check = true
board_build.partitions = partition-table-8MB.csv
upload_protocol = esptool
build_flags = ${esp32_base.build_flags}
	-Ivariants/esp32s3/seeed-sensecap-indicator
	-DSENSECAP_INDICATOR
	-DCONFIG_ARDUHAL_LOG_COLORS
	-DRADIOLIB_DEBUG_SPI=0
	-DRADIOLIB_DEBUG_PROTOCOL=0
	-DRADIOLIB_DEBUG_BASIC=0
	-DRADIOLIB_VERBOSE_ASSERT=0
	-DRADIOLIB_SPI_PARANOID=0
	-DIO_EXPANDER=0x40
	-DIO_EXPANDER_IRQ=42
	-DUSE_ARDUINO_HAL_GPIO
lib_deps = ${esp32s3_base.lib_deps}
	https://github.com/mverch67/LovyanGFX/archive/4c76238c1344162a234ae917b27651af146d6fb2.zip
	earlephilhower/ESP8266Audio@^1.9.9
	earlephilhower/ESP8266SAM@^1.0.1

[env:seeed-sensecap-indicator-tft]
extends = env:seeed-sensecap-indicator
board_level = pr
upload_speed = 460800
build_flags = 
	${env:seeed-sensecap-indicator.build_flags}
	-D INPUTDRIVER_BUTTON_TYPE=38
	-D CONFIG_DISABLE_HAL_LOCKS=1
	-D HAS_SCREEN=1
	-D HAS_TFT=1
	-D DISPLAY_SET_RESOLUTION
	-D RAM_SIZE=4096
	-D LV_CACHE_DEF_SIZE=2097152
	-D LV_LVGL_H_INCLUDE_SIMPLE
	-D LV_CONF_INCLUDE_SIMPLE
	-D LV_COMP_CONF_INCLUDE_SIMPLE
	-D LV_USE_SYSMON=0
	-D LV_USE_PROFILER=0
	-D LV_USE_PERF_MONITOR=0
	-D LV_USE_MEM_MONITOR=0
	-D LV_USE_LOG=0
	-D USE_LOG_DEBUG
	-D LOG_DEBUG_INC=\"DebugConfiguration.h\"
	-D CUSTOM_TOUCH_DRIVER
	-D LGFX_SCREEN_WIDTH=480
	-D LGFX_SCREEN_HEIGHT=480
	-D DISPLAY_SIZE=480x480
	-D LGFX_DRIVER=LGFX_INDICATOR
	-D GFX_DRIVER_INC=\"graphics/LGFX/LGFX_INDICATOR.h\"
	-D VIEW_320x240
	-D USE_PACKET_API
lib_deps = 
	${env:seeed-sensecap-indicator.lib_deps}
	${device-ui_base.lib_deps}
	https://github.com/mverch67/bb_captouch/archive/8626412fe650d808a267791c0eae6e5860c85a5d.zip

[env:seeed-xiao-s3]
extends = esp32s3_base
board = seeed-xiao-s3
board_level = pr
board_check = true
board_build.partitions = default_8MB.csv
upload_protocol = esptool
upload_speed = 921600
lib_deps = 
	${esp32s3_base.lib_deps}
build_unflags = 
	${esp32s3_base.build_unflags}
	-DARDUINO_USB_MODE=1
build_flags = 
	${esp32s3_base.build_flags}
	-D SEEED_XIAO_S3
	-I variants/esp32s3/seeed_xiao_s3
	-DBOARD_HAS_PSRAM
	-DARDUINO_USB_MODE=0

[env:station-g2]
extends = esp32s3_base
board = station-g2
board_level = pr
board_check = true
board_build.partitions = default_16MB.csv
board_build.mcu = esp32s3
upload_protocol = esptool
upload_speed = 921600
lib_deps = 
	${esp32s3_base.lib_deps}
build_unflags = 
	${esp32s3_base.build_unflags}
	-DARDUINO_USB_MODE=1
build_flags = 
	${esp32s3_base.build_flags}
	-D STATION_G2
	-I variants/esp32s3/station-g2
	-DBOARD_HAS_PSRAM
	-DSTATION_G2
	-DARDUINO_USB_MODE=0

[env:t-deck]
extends = esp32s3_base
board = t-deck
board_check = true
board_build.partitions = default_16MB.csv
upload_protocol = esptool
build_flags = ${esp32s3_base.build_flags}
	-D T_DECK
	-D BOARD_HAS_PSRAM
	-D GPS_POWER_TOGGLE
	-I variants/esp32s3/t-deck
lib_deps = ${esp32s3_base.lib_deps}
	lovyan03/LovyanGFX@^1.2.0
	earlephilhower/ESP8266Audio@^1.9.9
	earlephilhower/ESP8266SAM@^1.0.1

[env:t-deck-tft]
extends = env:t-deck
board_level = pr
build_flags = 
	${env:t-deck.build_flags}
	-D CONFIG_DISABLE_HAL_LOCKS=1
	-D INPUTDRIVER_I2C_KBD_TYPE=0x55
	-D INPUTDRIVER_ENCODER_TYPE=3
	-D INPUTDRIVER_ENCODER_LEFT=1
	-D INPUTDRIVER_ENCODER_RIGHT=2
	-D INPUTDRIVER_ENCODER_UP=3
	-D INPUTDRIVER_ENCODER_DOWN=15
	-D INPUTDRIVER_ENCODER_BTN=0
	-D INPUTDRIVER_BUTTON_TYPE=0
	-D HAS_SDCARD
	-D HAS_SCREEN=1
	-D HAS_TFT=1
	-D USE_I2S_BUZZER
	-D RAM_SIZE=5120
	-D LV_LVGL_H_INCLUDE_SIMPLE
	-D LV_CONF_INCLUDE_SIMPLE
	-D LV_COMP_CONF_INCLUDE_SIMPLE
	-D LV_USE_SYSMON=0
	-D LV_USE_PROFILER=0
	-D LV_USE_PERF_MONITOR=0
	-D LV_USE_MEM_MONITOR=0
	-D LV_USE_LOG=0
	-D USE_LOG_DEBUG
	-D LOG_DEBUG_INC=\"DebugConfiguration.h\"
	-D RADIOLIB_DEBUG_BASIC=0
	-D RADIOLIB_DEBUG_SPI=0
	-D RADIOLIB_DEBUG_PROTOCOL=0
	-D RADIOLIB_SPI_PARANOID=0
	-D LGFX_SCREEN_WIDTH=240
	-D LGFX_SCREEN_HEIGHT=320
	-D DISPLAY_SIZE=320x240
	-D LGFX_DRIVER=LGFX_TDECK
	-D GFX_DRIVER_INC=\"graphics/LGFX/LGFX_T_DECK.h\"
	-D VIEW_320x240
	-D USE_PACKET_API
	-D MAP_FULL_REDRAW
	-D CUSTOM_TOUCH_DRIVER
lib_deps = 
	${env:t-deck.lib_deps}
	${device-ui_base.lib_deps}
	https://github.com/bitbank2/bb_captouch/archive/refs/tags/1.3.1.zip

[env:t-deck-pro]
extends = esp32s3_base
board = t-deck-pro
board_check = true
upload_protocol = esptool
build_flags = 
	${esp32_base.build_flags} -I variants/esp32s3/t-deck-pro
	-D T_DECK_PRO
	-D GPS_POWER_TOGGLE
	-D USE_EINK
	-D EINK_DISPLAY_MODEL=GxEPD2_310_GDEQ031T10
	-D EINK_WIDTH=240
	-D EINK_HEIGHT=320
	-D EINK_LIMIT_FASTREFRESH=10
	-D EINK_LIMIT_GHOSTING_PX=2000
lib_deps = 
	${esp32s3_base.lib_deps}
	https://github.com/ZinggJM/GxEPD2/archive/refs/tags/1.6.4.zip
	https://github.com/CIRCUITSTATE/CSE_Touch/archive/b44f23b6f870b848f1fbe453c190879bc6cfaafa.zip
	https://github.com/CIRCUITSTATE/CSE_CST328/archive/refs/tags/v0.0.4.zip
	https://github.com/mverch67/BQ27220/archive/07d92be846abd8a0258a50c23198dac0858b22ed.zip

[env:t-eth-elite]
extends = esp32s3_base
board = esp32s3box
board_level = pr
board_check = true
board_build.partitions = default_16MB.csv
build_flags = 
	${esp32s3_base.build_flags}
	-D T_ETH_ELITE
	-D HAS_UDP_MULTICAST=1
	-I variants/esp32s3/t-eth-elite
	-D GPS_POWER_TOGGLE
lib_ignore = 
	Ethernet
lib_deps = 
	${esp32s3_base.lib_deps}
	https://github.com/meshtastic/ETHClass2/archive/v1.0.0.zip

[env:t-watch-s3]
extends = esp32s3_base
board = t-watch-s3
board_check = true
board_build.partitions = default_16MB.csv
upload_protocol = esptool
build_flags = ${esp32_base.build_flags}
	-DT_WATCH_S3
	-Ivariants/esp32s3/t-watch-s3
	-DPCF8563_RTC=0x51
	-DHAS_BMA423=1
lib_deps = ${esp32s3_base.lib_deps}
	lovyan03/LovyanGFX@^1.2.0
	lewisxhe/PCF8563_Library@1.0.1
	adafruit/Adafruit DRV2605 Library@^1.2.2
	earlephilhower/ESP8266Audio@^1.9.9
	earlephilhower/ESP8266SAM@^1.0.1
	lewisxhe/SensorLib@0.2.0

[env:tbeam-s3-core]
extends = esp32s3_base
board = tbeam-s3-core
board_build.partitions = default_8MB.csv
board_check = true
lib_deps = 
	${esp32s3_base.lib_deps}
	lewisxhe/PCF8563_Library@1.0.1
build_flags = 
	${esp32s3_base.build_flags}
	-I variants/esp32s3/tbeam-s3-core
	-D PCF8563_RTC=0x51

[env:tlora-pager]
extends = esp32s3_base
board = t-deck-pro
board_check = true
board_build.partitions = default_16MB.csv
upload_protocol = esptool
build_flags = ${esp32s3_base.build_flags}
	-I variants/esp32s3/tlora-pager
	-D T_LORA_PAGER
	-D BOARD_HAS_PSRAM
	-D GPS_POWER_TOGGLE
	-D HAS_SDCARD
	-D SDCARD_USE_SPI1
	-D ENABLE_ROTARY_PULLUP
	-D ENABLE_BUTTON_PULLUP
	-D HALF_STEP
lib_deps = ${esp32s3_base.lib_deps}
	lovyan03/LovyanGFX@1.2.7
	earlephilhower/ESP8266Audio@1.9.9
	earlephilhower/ESP8266SAM@1.0.1
	adafruit/Adafruit DRV2605 Library@1.2.4
	lewisxhe/PCF8563_Library@1.0.1
	lewisxhe/SensorLib@0.3.1
	https://github.com/pschatzmann/arduino-audio-driver/archive/refs/tags/v0.1.3.zip
	https://github.com/mverch67/BQ27220/archive/07d92be846abd8a0258a50c23198dac0858b22ed.zip

[env:tlora-pager-tft]
board_level = extra
extends = env:tlora-pager
build_flags = 
	${env:tlora-pager.build_flags}
	-D CONFIG_DISABLE_HAL_LOCKS=1
	-D INPUTDRIVER_ROTARY_TYPE=1
	-D INPUTDRIVER_ROTARY_UP=40
	-D INPUTDRIVER_ROTARY_DOWN=41
	-D INPUTDRIVER_ROTARY_BTN=7
	-D INPUTDRIVER_BUTTON_TYPE=0
	-D HAS_SCREEN=1
	-D HAS_TFT=1
	-D USE_I2S_BUZZER
	-D RAM_SIZE=5120
	-D LV_LVGL_H_INCLUDE_SIMPLE
	-D LV_CONF_INCLUDE_SIMPLE
	-D LV_COMP_CONF_INCLUDE_SIMPLE
	-D LV_USE_SYSMON=0
	-D LV_USE_PROFILER=0
	-D LV_USE_PERF_MONITOR=0
	-D LV_USE_MEM_MONITOR=0
	-D LV_USE_LOG=0
	-D USE_LOG_DEBUG
	-D LOG_DEBUG_INC=\"DebugConfiguration.h\"
	-D RADIOLIB_SPI_PARANOID=0
	-D LGFX_SCREEN_WIDTH=222
	-D LGFX_SCREEN_HEIGHT=480
	-D DISPLAY_SIZE=480x222
	-D DISPLAY_SET_RESOLUTION
	-D LGFX_DRIVER=LGFX_TLORA_PAGER
	-D GFX_DRIVER_INC=\"graphics/LGFX/LGFX_T_LORA_PAGER.h\"
	-D VIEW_480x222
	-D USE_PACKET_API
	-D MAP_FULL_REDRAW
lib_deps = 
	${env:tlora-pager.lib_deps}
	${device-ui_base.lib_deps}

[env:tlora-t3s3-epaper]
extends = esp32s3_base
board = tlora-t3s3-v1
board_check = true
upload_protocol = esptool
build_flags = 
	${esp32_base.build_flags}
	-D TLORA_T3S3_EPAPER
	-I variants/esp32s3/tlora_t3s3_epaper
	-DGPS_POWER_TOGGLE
	-DUSE_EINK
	-DEINK_DISPLAY_MODEL=GxEPD2_213_BN
	-DEINK_WIDTH=250
	-DEINK_HEIGHT=122
	-DUSE_EINK_DYNAMICDISPLAY
	-DEINK_LIMIT_FASTREFRESH=10
lib_deps = 
	${esp32s3_base.lib_deps}
	https://github.com/meshtastic/GxEPD2/archive/b202ebfec6a4821e098cf7a625ba0f6f2400292d.zip

[env:tlora-t3s3-epaper-inkhud]
extends = esp32s3_base, inkhud
board = tlora-t3s3-v1
board_check = true
upload_protocol = esptool
build_src_filter = 
	${esp32_base.build_src_filter}
	${inkhud.build_src_filter}
build_flags = 
	${esp32s3_base.build_flags}
	${inkhud.build_flags}
	-I variants/esp32s3/tlora_t3s3_epaper
	-D TLORA_T3S3_EPAPER
lib_deps = 
	${inkhud.lib_deps}
	${esp32s3_base.lib_deps}

[env:tlora-t3s3-v1]
extends = esp32s3_base
board = tlora-t3s3-v1
board_check = true
upload_protocol = esptool
build_flags = 
	${esp32_base.build_flags} -D TLORA_T3S3_V1 -I variants/esp32s3/tlora_t3s3_v1
	-DGPS_POWER_TOGGLE
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:tracksenger]
extends = esp32s3_base
board = heltec_wireless_tracker
board_build.partitions = default_8MB.csv
upload_protocol = esp-builtin
build_flags = 
	${esp32s3_base.build_flags}
	-I variants/esp32s3/tracksenger/internal
	-D HELTEC_TRACKER_V1_1
	-D GPS_POWER_TOGGLE
lib_deps = 
	${esp32s3_base.lib_deps}
	lovyan03/LovyanGFX@^1.2.0

[env:tracksenger-lcd]
extends = esp32s3_base
board = heltec_wireless_tracker
board_build.partitions = default_8MB.csv
upload_protocol = esp-builtin
build_flags = 
	${esp32s3_base.build_flags}
	-I variants/esp32s3/tracksenger/lcd
	-D HELTEC_TRACKER_V1_1
	-D GPS_POWER_TOGGLE
lib_deps = 
	${esp32s3_base.lib_deps}
	lovyan03/LovyanGFX@^1.2.0

[env:tracksenger-oled]
extends = esp32s3_base
board = heltec_wireless_tracker
board_build.partitions = default_8MB.csv
upload_protocol = esp-builtin
build_flags = 
	${esp32s3_base.build_flags}
	-I variants/esp32s3/tracksenger/oled
	-D HELTEC_TRACKER_V1_1
	-D GPS_POWER_TOGGLE
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:unphone]
extends = esp32s3_base
board = unphone
board_build.partitions = partition-table-8MB.csv
upload_speed = 921600
monitor_speed = 115200
monitor_filters = esp32_exception_decoder
build_flags = 
	${esp32s3_base.build_flags}
	-D UNPHONE
	-I variants/esp32s3/unphone
	-D ARDUINO_USB_MODE=0
	-D UNPHONE_ACCEL=0
	-D UNPHONE_TOUCHS=0
	-D UNPHONE_SDCARD=0
	-D UNPHONE_UI0=0
	-D UNPHONE_LORA=0
	-D UNPHONE_FACTORY_MODE=0
	-D USE_SX127x
	-D SDCARD_CS=43
build_src_filter = 
	${esp32s3_base.build_src_filter}
	+<../variants/esp32s3/unphone>
lib_deps = ${esp32s3_base.lib_deps}
	lovyan03/LovyanGFX@ 1.2.0
	https://gitlab.com/hamishcunningham/unphonelibrary#meshtastic@9.0.0
	adafruit/Adafruit NeoPixel @ ^1.12.0

[env:unphone-tft]
board_level = extra
extends = env:unphone
build_flags = 
	${env:unphone.build_flags}
	-D CONFIG_DISABLE_HAL_LOCKS=1
	-D INPUTDRIVER_BUTTON_TYPE=21
	-D HAS_SCREEN=1
	-D HAS_TFT=1
	-D HAS_SDCARD
	-D SDCARD_CS=43
	-D DISPLAY_SET_RESOLUTION
	-D RAM_SIZE=6144
	-D LV_CACHE_DEF_SIZE=2097152
	-D LV_LVGL_H_INCLUDE_SIMPLE
	-D LV_CONF_INCLUDE_SIMPLE
	-D LV_COMP_CONF_INCLUDE_SIMPLE
	-D LV_BUILD_TEST=0
	-D LV_USE_SYSMON=0
	-D LV_USE_PROFILER=0
	-D LV_USE_PERF_MONITOR=0
	-D LV_USE_MEM_MONITOR=0
	-D LV_USE_LOG=0
	-D USE_LOG_DEBUG
	-D LOG_DEBUG_INC=\"DebugConfiguration.h\"
	-D CUSTOM_TOUCH_DRIVER
	-D LGFX_SCREEN_WIDTH=480
	-D LGFX_SCREEN_HEIGHT=480
	-D DISPLAY_SIZE=480x480
	-D LGFX_DRIVER=LGFX_UNPHONE_V9
	-D GFX_DRIVER_INC=\"graphics/LGFX/LGFX_UNPHONE.h\"
	-D VIEW_320x240
	-D USE_PACKET_API
	-D MAP_FULL_REDRAW
lib_deps = 
	${env:unphone.lib_deps}
	${device-ui_base.lib_deps}

[native_base]
extends = portduino_base
build_flags = ${portduino_base.build_flags} -I variants/native/portduino
	-I /usr/include
board = cross_platform
lib_deps = 
	${portduino_base.lib_deps}
	melopero/Melopero RV3028@^1.1.0
build_src_filter = ${portduino_base.build_src_filter}

[env:native]
extends = native_base
build_flags = ${native_base.build_flags}
	!pkg-config --libs libulfius --silence-errors || :
	!pkg-config --libs openssl --silence-errors || :
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:native-tft]
extends = native_base
build_type = release
lib_deps = 
	${native_base.lib_deps}
	${device-ui_base.lib_deps}
build_flags = ${native_base.build_flags} -Os -lX11 -linput -lxkbcommon -ffunction-sections -fdata-sections -Wl,--gc-sections
	-D RAM_SIZE=16384
	-D USE_X11=1
	-D HAS_TFT=1
	-D HAS_SCREEN=1
	-D LV_CACHE_DEF_SIZE=6291456
	-D LV_BUILD_TEST=0
	-D LV_USE_LIBINPUT=1
	-D LV_LVGL_H_INCLUDE_SIMPLE
	-D LV_CONF_INCLUDE_SIMPLE
	-D LV_COMP_CONF_INCLUDE_SIMPLE
	-D USE_LOG_DEBUG
	-D LOG_DEBUG_INC=\"DebugConfiguration.h\"
	-D USE_PACKET_API
	-D VIEW_320x240
	!pkg-config --libs libulfius --silence-errors || :
	!pkg-config --libs openssl --silence-errors || :
build_src_filter = 
	${native_base.build_src_filter}

[env:native-sdl]
extends = native_base
build_type = release
lib_deps = 
	${env.lib_deps}
	${networking_base.lib_deps}
	${radiolib_base.lib_deps}
	${environmental_base.lib_deps}
	rweather/Crypto@0.4.0
	https://github.com/pine64/libch341-spi-userspace/archive/af9bc27c9c30fa90772279925b7c5913dff789b4.zip
	adafruit/Adafruit seesaw Library@1.7.9
	https://github.com/jp-bennett/LovyanGFX/archive/7458f84a126c1f8fdc7b038074f71be903f6e4c0.zip
build_flags = ${native_base.build_flags}
	!pkg-config --cflags --libs sdl2 --silence-errors || :
	-D LGFX_SDL=1

[env:native-fb]
extends = native_base
build_type = release
lib_deps = 
	${native_base.lib_deps}
	${device-ui_base.lib_deps}
board_level = extra
build_flags = ${native_base.build_flags} -Os -ffunction-sections -fdata-sections -Wl,--gc-sections
	-D RAM_SIZE=8192
	-D USE_FRAMEBUFFER=1
	-D LV_COLOR_DEPTH=32
	-D HAS_TFT=1
	-D HAS_SCREEN=1
	-D LV_BUILD_TEST=0
	-D LV_USE_LOG=0
	-D LV_USE_EVDEV=1
	-D LV_LVGL_H_INCLUDE_SIMPLE
	-D LV_CONF_INCLUDE_SIMPLE
	-D LV_COMP_CONF_INCLUDE_SIMPLE
	-D USE_LOG_DEBUG
	-D LOG_DEBUG_INC=\"DebugConfiguration.h\"
	-D USE_PACKET_API
	-D VIEW_320x240
	-D MAP_FULL_REDRAW
	!pkg-config --libs libulfius --silence-errors || :
	!pkg-config --libs openssl --silence-errors || :
build_src_filter = 
	${native_base.build_src_filter}

[env:native-tft-debug]
extends = native_base
build_type = debug
lib_deps = 
	${native_base.lib_deps}
	${device-ui_base.lib_deps}
board_level = extra
build_flags = ${native_base.build_flags} -O0 -fsanitize=address -lX11 -linput -lxkbcommon
	-D DEBUG_HEAP
	-D RAM_SIZE=16384
	-D USE_X11=1
	-D HAS_TFT=1
	-D HAS_SCREEN=0
	-D LV_CACHE_DEF_SIZE=6291456
	-D LV_BUILD_TEST=0
	-D LV_USE_LOG=1
	-D LV_USE_SYSMON=1
	-D LV_USE_PERF_MONITOR=1
	-D LV_USE_MEM_MONITOR=0
	-D LV_USE_PROFILER=0
	-D LV_USE_LIBINPUT=1
	-D LV_LVGL_H_INCLUDE_SIMPLE
	-D LV_CONF_INCLUDE_SIMPLE
	-D LV_COMP_CONF_INCLUDE_SIMPLE
	-D USE_LOG_DEBUG
	-D LOG_DEBUG_INC=\"DebugConfiguration.h\"
	-D USE_PACKET_API
	-D VIEW_320x240
	!pkg-config --libs libulfius --silence-errors || :
	!pkg-config --libs openssl --silence-errors || :
build_src_filter = ${env:native-tft.build_src_filter}

[env:coverage]
extends = env:native
build_flags = -lgcov --coverage -fprofile-abs-path -fsanitize=address ${env:native.build_flags}
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:buildroot]
extends = portduino_base
build_flags = ${portduino_base.build_flags} -O0 -I variants/native/portduino-buildroot
board = buildroot
lib_deps = ${portduino_base.lib_deps}
build_src_filter = ${portduino_base.build_src_filter}

[env:canaryone]
extends = nrf52840_base
board = canaryone
debug_tool = jlink
build_flags = 
	${nrf52840_base.build_flags}
	-I variants/nrf52840/canaryone
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/canaryone>
lib_deps = 
	${nrf52840_base.lib_deps}
	lewisxhe/PCF8563_Library@^1.0.1

[env:pca10059_diy_eink]
board_level = extra
extends = nrf52840_base
board = nordic_pca10059
build_flags = ${nrf52840_base.build_flags}
	-Ivariants/nrf52840/Dongle_nRF52840-pca10059-v1
	-D NORDIC_PCA10059
	-DEINK_DISPLAY_MODEL=GxEPD2_420_M01
	-DEINK_WIDTH=300
	-DEINK_HEIGHT=400
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/Dongle_nRF52840-pca10059-v1>
lib_deps = 
	${nrf52840_base.lib_deps}
	zinggjm/GxEPD2@^1.6.2
debug_tool = jlink

[env:thinknode_m1]
extends = nrf52840_base
board = ThinkNode-M1
board_check = true
debug_tool = jlink
build_flags = ${nrf52840_base.build_flags}
	-Ivariants/nrf52840/ELECROW-ThinkNode-M1
	-DELECROW_ThinkNode_M1
	-DGPS_POWER_TOGGLE
	-DUSE_EINK
	-DEINK_DISPLAY_MODEL=GxEPD2_154_D67
	-DEINK_WIDTH=200
	-DEINK_HEIGHT=200
	-DUSE_EINK_DYNAMICDISPLAY
	-DEINK_LIMIT_FASTREFRESH=10
	-DEINK_LIMIT_RATE_BACKGROUND_SEC=10
	-DEINK_LIMIT_RATE_RESPONSIVE_SEC=1
	-DEINK_BACKGROUND_USES_FAST
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/ELECROW-ThinkNode-M1>
lib_deps = 
	${nrf52840_base.lib_deps}
	https://github.com/meshtastic/GxEPD2/archive/33db3fa8ee6fc47d160bdb44f8f127c9a9203a10.zip
	lewisxhe/PCF8563_Library@^1.0.1
	khoih-prog/nRF52_PWM@^1.0.1

[env:thinknode_m1-inkhud]
extends = nrf52840_base, inkhud
board = ThinkNode-M1
board_check = true
debug_tool = jlink
build_flags = 
	${nrf52840_base.build_flags}
	${inkhud.build_flags}
	-I variants/nrf52840/ELECROW-ThinkNode-M1
	-D ELECROW_ThinkNode_M1
build_src_filter = 
	${nrf52_base.build_src_filter}
	${inkhud.build_src_filter}
	+<../variants/nrf52840/ELECROW-ThinkNode-M1>
lib_deps = 
	${inkhud.lib_deps}
	${nrf52840_base.lib_deps}
	lewisxhe/PCF8563_Library@^1.0.1

[env:feather_diy]
extends = nrf52840_base
board = adafruit_feather_nrf52840
build_flags = ${nrf52840_base.build_flags}
	-Ivariants/nrf52840/feather_diy
	-Dfeather_diy
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/feather_diy>
lib_deps = 
	${nrf52840_base.lib_deps}
debug_tool = jlink

[env:gat562_mesh_trial_tracker]
extends = nrf52840_base
board_level = extra
board = gat562_mesh_trial_tracker
board_check = true
build_flags = ${nrf52840_base.build_flags}
	-I variants/nrf52840/gat562_mesh_trial_tracker
	-D GAT562_MESH_TRIAL_TRACKER
	-DGPS_POWER_TOGGLE
	-DRADIOLIB_EXCLUDE_SX128X=1
	-DRADIOLIB_EXCLUDE_SX127X=1
	-DRADIOLIB_EXCLUDE_LR11X0=1
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/gat562_mesh_trial_tracker>
lib_deps = 
	${nrf52840_base.lib_deps}

[env:heltec-mesh-node-t114]
extends = nrf52840_base
board = heltec_mesh_node_t114
board_level = pr
debug_tool = jlink
build_flags = ${nrf52840_base.build_flags}
	-I variants/nrf52840/heltec_mesh_node_t114
	-DGPS_POWER_TOGGLE
	-DHELTEC_T114
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/heltec_mesh_node_t114>
lib_deps = 
	${nrf52840_base.lib_deps}
	lewisxhe/PCF8563_Library@^1.0.1
	https://github.com/meshtastic/st7789/archive/bd33ea58ddfe4a5e4a66d53300ccbd38d66ac21f.zip

[env:heltec-mesh-node-t114-inkhud]
board_level = extra
extends = nrf52840_base, inkhud
board = heltec_mesh_node_t114
board_check = true
build_flags = 
	${nrf52840_base.build_flags}
	${inkhud.build_flags}
	-I variants/nrf52840/heltec_mesh_node_t114-inkhud
build_src_filter = 
	${nrf52_base.build_src_filter}
	${inkhud.build_src_filter}
	+<../variants/nrf52840/heltec_mesh_node_t114-inkhud>
lib_deps = 
	${inkhud.lib_deps}
	${nrf52840_base.lib_deps}
	lewisxhe/PCF8563_Library@^1.0.1
extra_scripts = 
	${env.extra_scripts}
	variants/nrf52840/diy/nrf52_promicro_diy_tcxo/custom_build_tasks.py

[env:heltec-mesh-pocket-5000]
extends = nrf52840_base
board = heltec_mesh_pocket
debug_tool = jlink
build_flags = ${nrf52840_base.build_flags}
	-I variants/nrf52840/heltec_mesh_pocket
	-DHELTEC_MESH_POCKET
	-DHELTEC_MESH_POCKET_BATTERY_5000
	-DUSE_EINK
	-DEINK_DISPLAY_MODEL=GxEPD2_213_BN
	-DEINK_WIDTH=250
	-DEINK_HEIGHT=122
	-DUSE_EINK_DYNAMICDISPLAY
	-DEINK_LIMIT_FASTREFRESH=10
	-DEINK_LIMIT_RATE_BACKGROUND_SEC=30
	-DEINK_LIMIT_RATE_RESPONSIVE_SEC=1
	-DEINK_BACKGROUND_USES_FAST
	-DEINK_HASQUIRK_GHOSTING
	-DEINK_HASQUIRK_WEAKFASTREFRESH
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/heltec_mesh_pocket>
lib_deps = 
	${nrf52840_base.lib_deps}
	lewisxhe/PCF8563_Library@^1.0.1
	https://github.com/meshtastic/GxEPD2#b202ebfec6a4821e098cf7a625ba0f6f2400292d

[env:heltec-mesh-pocket-5000-inkhud]
extends = nrf52840_base, inkhud
board = heltec_mesh_pocket
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/heltec_mesh_pocket> ${inkhud.build_src_filter}
build_flags = ${heltec_mesh_pocket_base.build_flags}
	${inkhud.build_flags}
	-DHELTEC_MESH_POCKET
	-DHELTEC_MESH_POCKET_BATTERY_5000
lib_deps = 
	${inkhud.lib_deps}
	${heltec_mesh_pocket_base.lib_deps}

[env:heltec-mesh-pocket-10000]
extends = nrf52840_base
board = heltec_mesh_pocket
debug_tool = jlink
build_flags = ${nrf52840_base.build_flags}
	-I variants/nrf52840/heltec_mesh_pocket
	-DHELTEC_MESH_POCKET
	-DHELTEC_MESH_POCKET_BATTERY_10000
	-DUSE_EINK
	-DEINK_DISPLAY_MODEL=GxEPD2_213_BN
	-DEINK_WIDTH=250
	-DEINK_HEIGHT=122
	-DUSE_EINK_DYNAMICDISPLAY
	-DEINK_LIMIT_FASTREFRESH=10
	-DEINK_LIMIT_RATE_BACKGROUND_SEC=30
	-DEINK_LIMIT_RATE_RESPONSIVE_SEC=1
	-DEINK_BACKGROUND_USES_FAST
	-DEINK_HASQUIRK_GHOSTING
	-DEINK_HASQUIRK_WEAKFASTREFRESH
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/heltec_mesh_pocket>
lib_deps = 
	${nrf52840_base.lib_deps}
	lewisxhe/PCF8563_Library@^1.0.1
	https://github.com/meshtastic/GxEPD2#b202ebfec6a4821e098cf7a625ba0f6f2400292d

[env:heltec-mesh-pocket-10000-inkhud]
extends = nrf52840_base, inkhud
board = heltec_mesh_pocket
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/heltec_mesh_pocket> ${inkhud.build_src_filter}
build_flags = ${heltec_mesh_pocket_base.build_flags}
	${inkhud.build_flags}
	-DHELTEC_MESH_POCKET
	-DHELTEC_MESH_POCKET_BATTERY_10000
lib_deps = 
	${inkhud.lib_deps}
	${heltec_mesh_pocket_base.lib_deps}

[heltec_mesh_solar_base]
extends = nrf52840_base
board = heltec_mesh_solar
board_level = pr
debug_tool = jlink
build_flags = ${nrf52840_base.build_flags}
	-Ivariants/nrf52840/heltec_mesh_solar
	-DGPS_POWER_TOGGLE
	-DHELTEC_MESH_SOLAR
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/heltec_mesh_solar>
lib_deps = 
	${nrf52840_base.lib_deps}
	https://github.com/NMIoT/meshsolar/archive/dfc5330dad443982e6cdd37a61d33fc7252f468b.zip
	lewisxhe/PCF8563_Library@^1.0.1
	ArduinoJson@6.21.4

[env:heltec-mesh-solar]
extends = heltec_mesh_solar_base
build_flags = ${heltec_mesh_solar_base.build_flags}
	-DSPI_INTERFACES_COUNT=1
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:heltec-mesh-solar-eink]
extends = heltec_mesh_solar_base
build_flags = ${heltec_mesh_solar_base.build_flags}
	-DHELTEC_MESH_SOLAR_EINK
	-DSPI_INTERFACES_COUNT=2
	-DUSE_EINK
	-DPIN_SCREEN_VDD_CTL=3
	-DPIN_EINK_CS=41
	-DPIN_EINK_BUSY=11
	-DPIN_EINK_DC=13
	-DPIN_EINK_RES=40
	-DPIN_EINK_SCLK=12
	-DPIN_EINK_MOSI=2
	-DPIN_SPI1_MISO=-1
	-DPIN_SPI1_MOSI=PIN_EINK_MOSI
	-DPIN_SPI1_SCK=PIN_EINK_SCLK
	-DEINK_DISPLAY_MODEL=GxEPD2_213_E0213A367
	-DEINK_WIDTH=250
	-DEINK_HEIGHT=122
	-DUSE_EINK_DYNAMICDISPLAY
	-DEINK_LIMIT_FASTREFRESH=10
	-DEINK_LIMIT_RATE_BACKGROUND_SEC=30
	-DEINK_LIMIT_RATE_RESPONSIVE_SEC=1
	-DEINK_BACKGROUND_USES_FAST
	-DEINK_HASQUIRK_GHOSTING
lib_deps = 
	${heltec_mesh_solar_base.lib_deps}
	https://github.com/meshtastic/GxEPD2/archive/a05c11c02862624266b61599b0d6ba93e33c6f24.zip

[env:heltec-mesh-solar-inkhud]
extends = heltec_mesh_solar_base, inkhud
build_src_filter = ${heltec_mesh_solar_base.build_src_filter} ${inkhud.build_src_filter}
build_flags = ${heltec_mesh_solar_base.build_flags}
	${inkhud.build_flags}
	-DHELTEC_MESH_SOLAR_INKHUD
	-DSPI_INTERFACES_COUNT=2
	-DPIN_SCREEN_VDD_CTL=3
	-DPIN_EINK_CS=41
	-DPIN_EINK_BUSY=11
	-DPIN_EINK_DC=13
	-DPIN_EINK_RES=40
	-DPIN_EINK_SCLK=12
	-DPIN_EINK_MOSI=2
	-DPIN_SPI1_MISO=-1
	-DPIN_SPI1_MOSI=PIN_EINK_MOSI
	-DPIN_SPI1_SCK=PIN_EINK_SCLK
lib_deps = 
	${inkhud.lib_deps}
	${heltec_mesh_solar_base.lib_deps}

[env:heltec-mesh-solar-oled]
extends = heltec_mesh_solar_base
build_flags = ${heltec_mesh_solar_base.build_flags}
	-DHELTEC_MESH_SOLAR_OLED
	-DSPI_INTERFACES_COUNT=1
	-DPIN_SCREEN_VDD_CTL=3
	-DHAS_SCREEN=1
	-DRESET_OLED=40
	-DPIN_WIRE_SDA=2
	-DPIN_WIRE_SCL=12
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:heltec-mesh-solar-tft]
extends = heltec_mesh_solar_base
build_flags = ${heltec_mesh_solar_base.build_flags}
	-DHELTEC_MESH_SOLAR_TFT
	-DSPI_INTERFACES_COUNT=2
	-DUSE_ST7789
	-DST7789_NSS=41
	-DST7789_RS=13
	-DST7789_SDA=2
	-DST7789_SCK=12
	-DST7789_RESET=40
	-DST7789_MISO=-1
	-DST7789_BUSY=-1
	-DVTFT_CTRL=3
	-DVTFT_LEDA=11
	-DTFT_BACKLIGHT_ON=HIGH
	-DST7789_SPI_HOST=SPI2_HOST
	-DSPI_FREQUENCY=10000000
	-DSPI_READ_FREQUENCY=10000000
	-DTFT_HEIGHT=170
	-DTFT_WIDTH=320
	-DTFT_OFFSET_X=0
	-DTFT_OFFSET_Y=0
	-DBRIGHTNESS_DEFAULT=100
	-DPIN_SPI1_MISO=ST7789_MISO
	-DPIN_SPI1_MOSI=ST7789_SDA
	-DPIN_SPI1_SCK=ST7789_SCK
lib_deps = 
	${heltec_mesh_solar_base.lib_deps}
	https://github.com/meshtastic/st7789/archive/bd33ea58ddfe4a5e4a66d53300ccbd38d66ac21f.zip

[env:makerpython_nrf52840_sx1280_eink]
board_level = extra
extends = nrf52840_base
board = nordic_pca10059
build_flags = ${nrf52840_base.build_flags}
	-Ivariants/nrf52840/MakePython_nRF52840_eink
	-D PRIVATE_HW
	-D PIN_EINK_EN
	-DEINK_DISPLAY_MODEL=GxEPD2_290_T5D
	-DEINK_WIDTH=296
	-DEINK_HEIGHT=128
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/MakePython_nRF52840_eink>
lib_deps = 
	${nrf52840_base.lib_deps}
	https://github.com/meshtastic/ESP32_Codec2/archive/633326c78ac251c059ab3a8c430fcdf25b41672f.zip
	zinggjm/GxEPD2@^1.6.2
debug_tool = jlink

[env:makerpython_nrf52840_sx1280_oled]
board_level = extra
extends = nrf52840_base
board = nordic_pca10059
build_flags = ${nrf52840_base.build_flags}
	-I variants/nrf52840/MakePython_nRF52840_oled
	-D PRIVATE_HW
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/MakePython_nRF52840_oled>
lib_deps = 
	${nrf52840_base.lib_deps}
	https://github.com/meshtastic/ESP32_Codec2/archive/633326c78ac251c059ab3a8c430fcdf25b41672f.zip
debug_tool = jlink

[env:ME25LS01-4Y10TD]
extends = nrf52840_base
board = me25ls01-4y10td
board_level = extra
build_flags = ${nrf52840_base.build_flags}
	-Ivariants/nrf52840/ME25LS01-4Y10TD
	-Isrc/platform/nrf52/softdevice
	-Isrc/platform/nrf52/softdevice/nrf52
	-DME25LS01_4Y10TD
	-DGPS_POWER_TOGGLE
board_build.ldscript = src/platform/nrf52/nrf52840_s140_v7.ld
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/ME25LS01-4Y10TD>
lib_deps = 
	${nrf52840_base.lib_deps}
upload_protocol = nrfutil

[env:ME25LS01-4Y10TD_e-ink]
extends = nrf52840_base
board = me25ls01-4y10td
board_level = extra
build_flags = ${nrf52840_base.build_flags}
	-Ivariants/nrf52840/ME25LS01-4Y10TD_e-ink
	-Isrc/platform/nrf52/softdevice
	-Isrc/platform/nrf52/softdevice/nrf52
	-DME25LS01_4Y10TD
	-DGPS_POWER_TOGGLE
	-DEINK_DISPLAY_MODEL=GxEPD2_420_GDEY042T81
	-DEINK_WIDTH=400
	-DEINK_HEIGHT=300
board_build.ldscript = src/platform/nrf52/nrf52840_s140_v7.ld
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/ME25LS01-4Y10TD_e-ink>
lib_deps = 
	${nrf52840_base.lib_deps}
	zinggjm/GxEPD2@^1.6.2
upload_protocol = nrfutil

[env:meshlink]
extends = nrf52840_base
board = meshlink
board_level = extra
build_flags = ${nrf52840_base.build_flags}
	-I variants/nrf52840/meshlink
	-D MESHLINK
	-D GPS_POWER_TOGGLE
	-D EINK_DISPLAY_MODEL=GxEPD2_213_B74
	-D EINK_WIDTH=250
	-D EINK_HEIGHT=122
	-D USE_EINK
	-D USE_EINK_DYNAMICDISPLAY
	-D EINK_LIMIT_FASTREFRESH=5
	-D EINK_LIMIT_RATE_BACKGROUND_SEC=30
	-D EINK_LIMIT_RATE_RESPONSIVE_SEC=1
	-D EINK_LIMIT_GHOSTING_PX=2000
	-D EINK_BACKGROUND_USES_FAST
	-D EINK_HASQUIRK_VICIOUSFASTREFRESH
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/meshlink>
lib_deps = 
	${nrf52840_base.lib_deps}
	https://github.com/meshtastic/GxEPD2/archive/55f618961db45a23eff0233546430f1e5a80f63a.zip
debug_tool = jlink

[env:meshlink_eink]
extends = nrf52840_base
board = meshlink
board_level = extra
build_flags = ${nrf52840_base.build_flags}
	-I variants/nrf52840/meshlink_eink
	-D MESHLINK
	-D GPS_POWER_TOGGLE
	-D EINK_DISPLAY_MODEL=GxEPD2_213_B74
	-D EINK_WIDTH=250
	-D EINK_HEIGHT=122
	-D USE_EINK
	-D USE_EINK_DYNAMICDISPLAY
	-D EINK_LIMIT_FASTREFRESH=5
	-D EINK_LIMIT_RATE_BACKGROUND_SEC=30
	-D EINK_LIMIT_RATE_RESPONSIVE_SEC=1
	-D EINK_LIMIT_GHOSTING_PX=2000
	-D EINK_BACKGROUND_USES_FAST
	-D EINK_HASQUIRK_VICIOUSFASTREFRESH
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/meshlink_eink>
lib_deps = 
	${nrf52840_base.lib_deps}
	https://github.com/meshtastic/GxEPD2/archive/55f618961db45a23eff0233546430f1e5a80f63a.zip
debug_tool = jlink

[env:meshtiny]
extends = nrf52840_base
board = meshtiny
board_level = extra
build_flags = ${nrf52840_base.build_flags} -Ivariants/nrf52840/meshtiny -D MESHTINY
	-D USE_PIN_BUZZER
	-D MESHTASTIC_EXCLUDE_GPS=1
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/meshtiny>
lib_deps = 
	${nrf52840_base.lib_deps}

[env:monteops_hw1]
board_level = extra
extends = nrf52840_base
board = wiscore_rak4631
build_flags = ${nrf52840_base.build_flags}
	-I variants/nrf52840/monteops_hw1
	-D MONTEOPS_HW1
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/monteops_hw1> +<mesh/eth/> +<mesh/api/> +<mqtt/>
lib_deps = 
	${nrf52840_base.lib_deps}
	${networking_base.lib_deps}
	https://github.com/RAKWireless/RAK13800-W5100S/archive/1.0.2.zip
debug_tool = jlink

[env:ms24sf1]
extends = nrf52840_base
board = ms24sf1
board_level = extra
build_flags = ${nrf52840_base.build_flags}
	-Ivariants/nrf52840/MS24SF1
	-Isrc/platform/nrf52/softdevice
	-Isrc/platform/nrf52/softdevice/nrf52
	-DGPS_POWER_TOGGLE
board_build.ldscript = src/platform/nrf52/nrf52840_s140_v7.ld
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/MS24SF1>
lib_deps = 
	${nrf52840_base.lib_deps}
upload_protocol = nrfutil

[env:nano-g2-ultra]
extends = nrf52840_base
board = nano-g2-ultra
debug_tool = jlink
build_flags = ${nrf52840_base.build_flags}
	-I variants/nrf52840/nano-g2-ultra
	-D NANO_G2_ULTRA
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/nano-g2-ultra>
lib_deps = 
	${nrf52840_base.lib_deps}
	lewisxhe/PCF8563_Library@^1.0.1

[env:rak2560]
extends = nrf52840_base
board = wiscore_rak4631
board_check = true
build_flags = ${nrf52840_base.build_flags}
	-I variants/nrf52840/rak2560
	-D RAK_4631
	-DGPS_POWER_TOGGLE
	-DRADIOLIB_EXCLUDE_SX128X=1
	-DRADIOLIB_EXCLUDE_SX127X=1
	-DRADIOLIB_EXCLUDE_LR11X0=1
	-DHAS_RAKPROT=1
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/rak2560> +<mesh/api/> +<mqtt/> +<serialization/>
lib_deps = 
	${nrf52840_base.lib_deps}
	${nrf52_networking_base.lib_deps}
	melopero/Melopero RV3028@^1.1.0
	https://github.com/RAKWireless/RAK13800-W5100S/archive/1.0.2.zip
	rakwireless/RAKwireless NCP5623 RGB LED library@^1.0.2
	beegee-tokyo/RAK12034-BMX160/archive/dcead07ffa267d3c906e9ca4a1330ab989e957e2.zip

[env:rak4631]
extends = nrf52840_base
board = wiscore_rak4631
board_level = pr
board_check = true
build_flags = ${nrf52840_base.build_flags}
	-I variants/nrf52840/rak4631
	-D RAK_4631
	-DGPS_POWER_TOGGLE
	-DEINK_DISPLAY_MODEL=GxEPD2_213_BN
	-DEINK_WIDTH=250
	-DEINK_HEIGHT=122
	-DRADIOLIB_EXCLUDE_SX128X=1
	-DRADIOLIB_EXCLUDE_SX127X=1
	-DRADIOLIB_EXCLUDE_LR11X0=1
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/rak4631> +<mesh/eth/> +<mesh/api/> +<mqtt/>
lib_deps = 
	${nrf52840_base.lib_deps}
	${nrf52_networking_base.lib_deps}
	melopero/Melopero RV3028@^1.1.0
	https://github.com/RAKWireless/RAK13800-W5100S/archive/1.0.2.zip
	rakwireless/RAKwireless NCP5623 RGB LED library@^1.0.2
	beegee-tokyo/RAK12034-BMX160/archive/dcead07ffa267d3c906e9ca4a1330ab989e957e2.zip

[env:rak4631_dbg]
extends = env:rak4631
board_level = extra
build_flags = 
	${env:rak4631.build_flags}
	-D USE_SEMIHOSTING
lib_deps = 
	${env:rak4631.lib_deps}
	https://github.com/geeksville/Armduino-Semihosting/archive/35b538fdf208c3530c1434cd099a08e486672ee4.zip
upload_protocol = stlink

[env:rak4631_eink]
extends = nrf52840_base
board = wiscore_rak4631
build_flags = ${nrf52840_base.build_flags}
	-I variants/nrf52840/rak4631_epaper
	-D RAK_4631
	-DEINK_DISPLAY_MODEL=GxEPD2_213_BN
	-DEINK_WIDTH=250
	-DEINK_HEIGHT=122
	-DRADIOLIB_EXCLUDE_SX128X=1
	-DRADIOLIB_EXCLUDE_SX127X=1
	-DRADIOLIB_EXCLUDE_LR11X0=1
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/rak4631_epaper>
lib_deps = 
	${nrf52840_base.lib_deps}
	zinggjm/GxEPD2@^1.6.2
	melopero/Melopero RV3028@^1.1.0
	rakwireless/RAKwireless NCP5623 RGB LED library@^1.0.2
	beegee-tokyo/RAKwireless RAK12034@^1.0.0
	beegee-tokyo/RAK12035_SoilMoisture@^1.0.4
debug_tool = jlink

[env:rak4631_eink_onrxtx]
board_level = extra
extends = nrf52840_base
board = wiscore_rak4631
build_flags = ${nrf52840_base.build_flags}
	-I variants/nrf52840/rak4631_epaper
	-D RAK_4631
	-D PIN_EINK_EN=34
	-D EINK_DISPLAY_MODEL=GxEPD2_213_BN
	-D EINK_WIDTH=250
	-D EINK_HEIGHT=122
	-D RADIOLIB_EXCLUDE_SX128X=1
	-D RADIOLIB_EXCLUDE_SX127X=1
	-D RADIOLIB_EXCLUDE_LR11X0=1
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/rak4631_epaper_onrxtx>
lib_deps = 
	${nrf52840_base.lib_deps}
	zinggjm/GxEPD2@^1.6.2
	melopero/Melopero RV3028@^1.1.0
	rakwireless/RAKwireless NCP5623 RGB LED library@^1.0.2
	beegee-tokyo/RAKwireless RAK12034@^1.0.0
	beegee-tokyo/RAK12035_SoilMoisture@^1.0.4
debug_tool = jlink

[env:rak4631_eth_gw]
extends = nrf52840_base
board = wiscore_rak4631
board_check = true
build_flags = ${nrf52840_base.build_flags}
	-I variants/nrf52840/rak4631_eth_gw
	-D RAK_4631
	-DGPS_POWER_TOGGLE
	-DHAS_UDP_MULTICAST=1
	-DEINK_DISPLAY_MODEL=GxEPD2_213_BN
	-DEINK_WIDTH=250
	-DEINK_HEIGHT=122
	-DNRF52_USE_JSON=1
	-DMESHTASTIC_EXCLUDE_WIFI=1
	-DMESHTASTIC_EXCLUDE_SCREEN=1
	-DMESHTASTIC_EXCLUDE_POWER_FSM=1
	-DMESHTASTIC_EXCLUDE_POWERMON=1
	-DMESHTASTIC_EXCLUDE_EXTERNALNOTIFICATION=1
	-DMESHTASTIC_EXCLUDE_PAXCOUNTER=1
	-DMESHTASTIC_EXCLUDE_REMOTEHARDWARE=1
	-DMESHTASTIC_EXCLUDE_STOREFORWARD=1
	-DMESHTASTIC_EXCLUDE_CANNEDMESSAGES=1
	-DMESHTASTIC_EXCLUDE_WAYPOINT=1
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/rak4631_eth_gw> +<mesh/eth/> +<mesh/api/> +<mqtt/> +<serialization/>
lib_deps = 
	${nrf52840_base.lib_deps}
	${networking_base.lib_deps}
	melopero/Melopero RV3028@^1.1.0
	https://github.com/RAKWireless/RAK13800-W5100S/archive/1.0.2.zip
	rakwireless/RAKwireless NCP5623 RGB LED library@^1.0.2
	https://github.com/RAKWireless/RAK12034-BMX160/archive/dcead07ffa267d3c906e9ca4a1330ab989e957e2.zip
	bblanchon/ArduinoJson @ 6.21.4

[env:rak4631_eth_gw_dbg]
extends = env:rak4631
board_level = extra
build_flags = 
	${env:rak4631_eth_gw.build_flags}
	-D USE_SEMIHOSTING
lib_deps = 
	${env:rak4631_eth_gw.lib_deps}
	https://github.com/geeksville/Armduino-Semihosting/archive/35b538fdf208c3530c1434cd099a08e486672ee4.zip
upload_protocol = stlink

[env:rak4631_nomadstar_meteor_pro]
extends = nrf52840_base
board = wiscore_rak4631
board_check = true
build_flags = ${nrf52840_base.build_flags}
	-I variants/nrf52840/rak4631_nomadstar_meteor_pro
	-D NOMADSTAR_METEOR_PRO
	-DEINK_DISPLAY_MODEL=GxEPD2_213_BN
	-DEINK_WIDTH=250
	-DEINK_HEIGHT=122
	-DRADIOLIB_EXCLUDE_SX128X=1
	-DRADIOLIB_EXCLUDE_SX127X=1
	-DRADIOLIB_EXCLUDE_LR11X0=1
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/rak4631_nomadstar_meteor_pro> +<mesh/api/> +<mqtt/>
lib_deps = 
	${nrf52840_base.lib_deps}
	https://github.com/NomadStar-outdoor/IOBoard-RGB-LP5562-Library.git#9c366c8

[env:rak4631_nomadstar_meteor_pro_dbg]
extends = env:rak4631_nomadstar_meteor_pro
board_level = extra
build_flags = 
	${env:rak4631.build_flags}
	-D USE_SEMIHOSTING
lib_deps = 
	${env:rak4631.lib_deps}
	https://github.com/geeksville/Armduino-Semihosting/archive/35b538fdf208c3530c1434cd099a08e486672ee4.zip
upload_protocol = stlink

[env:rak_wismeshtag]
extends = nrf52840_base
board = wiscore_rak4631
board_check = true
build_flags = ${nrf52840_base.build_flags}
	-I variants/nrf52840/rak_wismeshtag
	-D WISMESH_TAG
	-D RAK_4631
	-DGPS_POWER_TOGGLE
	-DRADIOLIB_EXCLUDE_SX128X=1
	-DRADIOLIB_EXCLUDE_SX127X=1
	-DRADIOLIB_EXCLUDE_LR11X0=1
	-DMESHTASTIC_EXCLUDE_WIFI=1
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/rak_wismeshtag>
lib_deps = 
	${nrf52840_base.lib_deps}

[env:rak_wismeshtap]
extends = nrf52840_base
board = wiscore_rak4631
build_flags = ${nrf52840_base.build_flags}
	-I variants/nrf52840/rak_wismeshtap
	-DWISMESH_TAP
	-DRAK_4631
	-DGPS_POWER_TOGGLE
	-DEINK_DISPLAY_MODEL=GxEPD2_213_BN
	-DEINK_WIDTH=250
	-DEINK_HEIGHT=122
	-DMESHTASTIC_EXCLUDE_WIFI=1
	-DMESHTASTIC_EXCLUDE_DETECTIONSENSOR=1
	-DMESHTASTIC_EXCLUDE_STOREFORWARD=1
	-DMESHTASTIC_EXCLUDE_POWER_TELEMETRY=1
	-DMESHTASTIC_EXCLUDE_ATAK=1
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/rak_wismeshtap> +<mesh/eth/> +<mesh/api/> +<mqtt/>
lib_deps = 
	${nrf52840_base.lib_deps}
	${nrf52_networking_base.lib_deps}
	melopero/Melopero RV3028@^1.1.0
	https://github.com/RAKWireless/RAK13800-W5100S/archive/1.0.2.zip
	rakwireless/RAKwireless NCP5623 RGB LED library@^1.0.2
	bodmer/TFT_eSPI
	beegee-tokyo/RAKwireless RAK12034@^1.0.0
	beegee-tokyo/RAK14014-FT6336U @ 1.0.1
	beegee-tokyo/RAK12035_SoilMoisture@^1.0.4
debug_tool = jlink

[env:seeed_solar_node]
board = seeed_solar_node
extends = nrf52840_base
build_flags = ${nrf52840_base.build_flags}
	-I variants/nrf52840/seeed_solar_node
	-D SEEED_SOLAR_NODE
	-I src/platform/nrf52/softdevice
	-I src/platform/nrf52/softdevice/nrf52
board_build.ldscript = src/platform/nrf52/nrf52840_s140_v7.ld
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/seeed_solar_node>
lib_deps = 
	${nrf52840_base.lib_deps}
debug_tool = jlink

[env:seeed_wio_tracker_L1]
board = seeed_wio_tracker_L1
extends = nrf52840_base
build_flags = ${nrf52840_base.build_flags}
	-I variants/nrf52840/seeed_wio_tracker_L1
	-D SEEED_WIO_TRACKER_L1
	-I src/platform/nrf52/softdevice
	-I src/platform/nrf52/softdevice/nrf52
board_build.ldscript = src/platform/nrf52/nrf52840_s140_v7.ld
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/seeed_wio_tracker_L1>
lib_deps = 
	${nrf52840_base.lib_deps}
debug_tool = jlink

[env:seeed_wio_tracker_L1_eink]
board = seeed_wio_tracker_L1
extends = nrf52840_base
build_flags = ${nrf52840_base.build_flags}
	-I variants/nrf52840/seeed_wio_tracker_L1_eink
	-D SEEED_WIO_TRACKER_L1_EINK
	-D SEEED_WIO_TRACKER_L1
	-I src/platform/nrf52/softdevice
	-I src/platform/nrf52/softdevice/nrf52
	-DUSE_EINK
	-DEINK_DISPLAY_MODEL=GxEPD2_213_B74
	-DEINK_WIDTH=250
	-DEINK_HEIGHT=122
	-DUSE_EINK_DYNAMICDISPLAY
	-DEINK_LIMIT_FASTREFRESH=10
	-DEINK_LIMIT_RATE_BACKGROUND_SEC=30
	-DEINK_LIMIT_RATE_RESPONSIVE_SEC=1
	-DEINK_BACKGROUND_USES_FAST
	-DEINK_HASQUIRK_GHOSTING
	-DEINK_HASQUIRK_WEAKFASTREFRESH
board_build.ldscript = src/platform/nrf52/nrf52840_s140_v7.ld
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/seeed_wio_tracker_L1_eink>
lib_deps = 
	${nrf52840_base.lib_deps}
	https://github.com/meshtastic/GxEPD2#b202ebfec6a4821e098cf7a625ba0f6f2400292d
debug_tool = jlink

[env:seeed_wio_tracker_L1_eink-inkhud]
board = seeed_wio_tracker_L1
extends = nrf52840_base, inkhud
build_flags = 
	${nrf52840_base.build_flags}
	${inkhud.build_flags}
	-I variants/nrf52840/seeed_wio_tracker_L1_eink
	-D SEEED_WIO_TRACKER_L1
	-D BUTTON_PIN=D13
board_build.ldscript = src/platform/nrf52/nrf52840_s140_v7.ld
build_src_filter = 
	${nrf52_base.build_src_filter}
	${inkhud.build_src_filter}
	+<../variants/nrf52840/seeed_wio_tracker_L1_eink>
lib_deps = 
	${inkhud.lib_deps}
	${nrf52840_base.lib_deps}
debug_tool = jlink

[env:seeed_xiao_nrf52840_kit]
extends = nrf52840_base
board = xiao_ble_sense
board_level = pr
build_flags = ${nrf52840_base.build_flags}
	-Ivariants/nrf52840/seeed_xiao_nrf52840_kit
	-Isrc/platform/nrf52/softdevice
	-Isrc/platform/nrf52/softdevice/nrf52
	-DSEEED_XIAO_NRF52840_KIT
	-DGPS_L76K
board_build.ldscript = src/platform/nrf52/nrf52840_s140_v7.ld
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/seeed_xiao_nrf52840_kit>
lib_deps = 
	${nrf52840_base.lib_deps}
debug_tool = jlink

[env:seeed_xiao_nrf52840_kit_i2c]
extends = env:seeed_xiao_nrf52840_kit
board_level = extra
build_flags = ${env:seeed_xiao_nrf52840_kit.build_flags}
	-DSEEED_XIAO_NRF52840_KIT
build_unflags = -DGPS_L76K
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:t-echo]
extends = nrf52840_base
board = t-echo
board_level = pr
board_check = true
debug_tool = jlink
build_flags = ${nrf52840_base.build_flags}
	-I variants/nrf52840/t-echo
	-DGPS_POWER_TOGGLE
	-DEINK_DISPLAY_MODEL=GxEPD2_154_D67
	-DEINK_WIDTH=200
	-DEINK_HEIGHT=200
	-DUSE_EINK
	-DUSE_EINK_DYNAMICDISPLAY
	-DEINK_LIMIT_FASTREFRESH=20
	-DEINK_BACKGROUND_USES_FAST
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/t-echo>
lib_deps = 
	${nrf52840_base.lib_deps}
	https://github.com/meshtastic/GxEPD2/archive/55f618961db45a23eff0233546430f1e5a80f63a.zip
	lewisxhe/PCF8563_Library@^1.0.1

[env:t-echo-inkhud]
extends = nrf52840_base, inkhud
board = t-echo
board_level = pr
board_check = true
debug_tool = jlink
build_flags = 
	${nrf52840_base.build_flags}
	${inkhud.build_flags}
	-I variants/nrf52840/t-echo
build_src_filter = 
	${nrf52_base.build_src_filter}
	${inkhud.build_src_filter}
	+<../variants/nrf52840/t-echo>
lib_deps = 
	${inkhud.lib_deps}
	${nrf52840_base.lib_deps}
	lewisxhe/PCF8563_Library@^1.0.1

[env:t-echo-lite]
extends = nrf52840_base
board = t-echo
board_check = true
debug_tool = jlink
build_flags = ${nrf52840_base.build_flags}
	-I variants/nrf52840/t-echo-lite
	-D T_ECHO_LITE
	-D GPS_POWER_TOGGLE
	-D EINK_DISPLAY_MODEL=GxEPD2_122_T61
	-D EINK_WIDTH=192
	-D EINK_HEIGHT=176
	-D USE_EINK
	-D USE_EINK_DYNAMICDISPLAY
	-D EINK_LIMIT_FASTREFRESH=20
	-D EINK_BACKGROUND_USES_FAST
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/t-echo-lite>
lib_deps = 
	${nrf52840_base.lib_deps}
	https://github.com/meshtastic/GxEPD2/archive/a05c11c02862624266b61599b0d6ba93e33c6f24.zip

[env:tracker-t1000-e]
extends = nrf52840_base
board = tracker-t1000-e
board_level = pr
build_flags = ${nrf52840_base.build_flags}
	-I variants/nrf52840/tracker-t1000-e
	-Isrc/platform/nrf52/softdevice
	-Isrc/platform/nrf52/softdevice/nrf52
	-DTRACKER_T1000_E
	-DGPS_POWER_TOGGLE
	-DMESHTASTIC_EXCLUDE_ENVIRONMENTAL_SENSOR=1
	-DMESHTASTIC_EXCLUDE_I2C=1
	-DMESHTASTIC_EXCLUDE_GPS=1
	-DMESHTASTIC_EXCLUDE_SCREEN=1
	-DMESHTASTIC_EXCLUDE_POWER_FSM=1
	-DMESHTASTIC_EXCLUDE_POWERMON=1
	-DMESHTASTIC_EXCLUDE_EXTERNALNOTIFICATION=1
	-DMESHTASTIC_EXCLUDE_PAXCOUNTER=1
	-DMESHTASTIC_EXCLUDE_REMOTEHARDWARE=1
	-DMESHTASTIC_EXCLUDE_STOREFORWARD=1
	-DMESHTASTIC_EXCLUDE_CANNEDMESSAGES=1
	-DMESHTASTIC_EXCLUDE_WAYPOINT=1
board_build.ldscript = src/platform/nrf52/nrf52840_s140_v7.ld
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/tracker-t1000-e>
lib_deps = 
	${nrf52840_base.lib_deps}
	https://github.com/meshtastic/QMA6100P_Arduino_Library/archive/14c900b8b2e4feaac5007a7e41e0c1b7f0841136.zip
debug_tool = jlink
upload_protocol = nrfutil

[env:TWC_mesh_v4]
extends = nrf52840_base
board = nordic_pca10059
board_level = extra
build_flags = ${nrf52840_base.build_flags}
	-I variants/nrf52840/TWC_mesh_v4
	-D TWC_mesh_v4
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/TWC_mesh_v4>
lib_deps = 
	${nrf52840_base.lib_deps}
	zinggjm/GxEPD2@^1.6.2
debug_tool = jlink

[env:wio-sdk-wm1110]
extends = nrf52840_base
board = wio-sdk-wm1110
extra_scripts = 
	${env.extra_scripts}
	extra_scripts/disable_adafruit_usb.py
build_unflags = ${nrf52840_base:build_unflags} -DUSBCON -DUSE_TINYUSB
build_flags = ${nrf52840_base.build_flags}
	-Ivariants/nrf52840/wio-sdk-wm1110
	-Isrc/platform/nrf52/softdevice
	-Isrc/platform/nrf52/softdevice/nrf52
	-DWIO_WM1110
	-DGPS_POWER_TOGGLE
	-DCFG_TUD_CDC=0
board_build.ldscript = src/platform/nrf52/nrf52840_s140_v7.ld
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/wio-sdk-wm1110>
debug_tool = stlink
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:wio-t1000-s]
extends = nrf52840_base
board = wio-t1000-s
board_level = extra
build_flags = ${nrf52840_base.build_flags}
	-I variants/nrf52840/wio-t1000-s
	-Isrc/platform/nrf52/softdevice
	-Isrc/platform/nrf52/softdevice/nrf52
	-DWIO_WM1110
	-DGPS_POWER_TOGGLE
board_build.ldscript = src/platform/nrf52/nrf52840_s140_v7.ld
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/wio-t1000-s>
lib_deps = 
	${nrf52840_base.lib_deps}
debug_tool = jlink
upload_protocol = jlink

[env:wio-tracker-wm1110]
extends = nrf52840_base
board = wio-tracker-wm1110
build_flags = ${nrf52840_base.build_flags}
	-I variants/nrf52840/wio-tracker-wm1110
	-Isrc/platform/nrf52/softdevice
	-Isrc/platform/nrf52/softdevice/nrf52
	-DWIO_WM1110
	-DGPS_POWER_TOGGLE
board_build.ldscript = src/platform/nrf52/nrf52840_s140_v7.ld
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/wio-tracker-wm1110>
lib_deps = 
	${nrf52840_base.lib_deps}

[env:challenger_2040_lora]
extends = rp2040_base
board = challenger_2040_lora
board_level = extra
upload_protocol = picotool
build_flags = 
	${rp2040_base.build_flags}
	-D PRIVATE_HW
	-I variants/rp2040/challenger_2040_lora
	-D DEBUG_RP2040_PORT=Serial
	-D HW_SPI1_DEVICE
lib_deps = 
	${rp2040_base.lib_deps}
debug_build_flags = ${rp2040_base.build_flags}
debug_tool = cmsis-dap

[env:catsniffer]
extends = rp2040_base
board = rpipico
board_level = extra
upload_protocol = picotool
build_flags = 
	${rp2040_base.build_flags}
	-D RPI_PICO
	-I variants/rp2040/ec_catsniffer
	-D DEBUG_RP2040_PORT=Serial
lib_deps = 
	${rp2040_base.lib_deps}
debug_build_flags = ${rp2040_base.build_flags}, -g
debug_tool = cmsis-dap

[env:feather_rp2040_rfm95]
extends = rp2040_base
board = adafruit_feather
upload_protocol = picotool
build_flags = 
	${rp2040_base.build_flags}
	-D RP2040_FEATHER_RFM95
	-I variants/rp2040/feather_rp2040_rfm95
	-D DEBUG_RP2040_PORT=Serial
	-D HW_SPI1_DEVICE
lib_deps = 
	${rp2040_base.lib_deps}
debug_build_flags = ${rp2040_base.build_flags}
debug_tool = cmsis-dap

[env:nibble-rp2040]
extends = rp2040_base
board = rpipico
board_level = extra
upload_protocol = picotool
build_flags = 
	${rp2040_base.build_flags}
	-D PRIVATE_HW
	-I variants/rp2040/nibble_rp2040
	-D DEBUG_RP2040_PORT=Serial
	-D HW_SPI1_DEVICE
lib_deps = 
	${rp2040_base.lib_deps}
debug_build_flags = ${rp2040_base.build_flags}, -g
debug_tool = cmsis-dap

[env:rak11310]
extends = rp2040_base
board = rakwireless_rak11300
board_level = pr
upload_protocol = picotool
build_flags = 
	${rp2040_base.build_flags}
	-D RAK11310
	-I variants/rp2040/rak11310
	-D DEBUG_RP2040_PORT=Serial
	-D RV3028_RTC=0x52
build_src_filter = ${rp2040_base.build_src_filter} +<../variants/rp2040/rak11310> +<mesh/eth/> +<mesh/api/> +<mqtt/>
lib_deps = 
	${rp2040_base.lib_deps}
	${networking_base.lib_deps}
	melopero/Melopero RV3028@^1.1.0
	https://github.com/RAKWireless/RAK13800-W5100S/archive/1.0.2.zip
debug_build_flags = ${rp2040_base.build_flags}, -g
debug_tool = cmsis-dap

[env:rp2040-lora]
extends = rp2040_base
board = rpipico
upload_protocol = picotool
build_flags = 
	${rp2040_base.build_flags}
	-D RP2040_LORA
	-I variants/rp2040/rp2040-lora
	-D DEBUG_RP2040_PORT=Serial
	-D HW_SPI1_DEVICE
lib_deps = 
	${rp2040_base.lib_deps}
debug_build_flags = ${rp2040_base.build_flags}, -g
debug_tool = cmsis-dap

[env:pico]
extends = rp2040_base
board = rpipico
board_level = pr
upload_protocol = picotool
build_flags = 
	${rp2040_base.build_flags}
	-D RPI_PICO
	-I variants/rp2040/rpipico
	-D DEBUG_RP2040_PORT=Serial
	-D HW_SPI1_DEVICE
lib_deps = 
	${rp2040_base.lib_deps}
debug_build_flags = ${rp2040_base.build_flags}, -g
debug_tool = cmsis-dap

[env:pico_slowclock]
extends = rp2040_base
board = rpipico
board_level = extra
upload_protocol = jlink
debug_tool = custom
debug_init_cmds = 
	target extended-remote localhost:3333
	$INIT_BREAK
	monitor reset halt
	$LOAD_CMDS
	monitor init
	monitor reset halt
build_flags = 
	${rp2040_base.build_flags}
	-DRPI_PICO
	-Ivariants/rp2040/rpipico-slowclock
	-DDEBUG_RP2040_PORT=Serial2
	-DHW_SPI1_DEVICE
	-g
	-DNO_USB
lib_deps = 
	${rp2040_base.lib_deps}
debug_build_flags = ${rp2040_base.build_flags}
	-g
	-DNO_USB

[env:picow]
extends = rp2040_base
board = rpipicow
board_level = pr
board_check = true
upload_protocol = picotool
build_flags = 
	${rp2040_base.build_flags}
	-D RPI_PICO
	-I variants/rp2040/rpipicow
	-D HW_SPI1_DEVICE
	-D HAS_UDP_MULTICAST=1
	-fexceptions
build_src_filter = ${rp2040_base.build_src_filter} +<mesh/wifi/>
lib_deps = 
	${rp2040_base.lib_deps}
	${networking_base.lib_deps}
debug_build_flags = ${rp2040_base.build_flags}, -g
debug_tool = cmsis-dap

[env:senselora_rp2040]
board_level = extra
extends = rp2040_base
board = rpipico
upload_protocol = picotool
build_flags = ${rp2040_base.build_flags}
	-D SENSELORA_RP2040
	-I variants/rp2040/senselora_rp2040
	-D DEBUG_RP2040_PORT=Serial
lib_deps = 
	${rp2040_base.lib_deps}

[env:pico2]
extends = rp2350_base
board = rpipico2
board_level = pr
upload_protocol = picotool
build_flags = 
	${rp2350_base.build_flags}
	-D RPI_PICO2
	-I variants/rp2350/rpipico2
	-D DEBUG_RP2040_PORT=Serial
	-D HW_SPI1_DEVICE
lib_deps = 
	${rp2350_base.lib_deps}
debug_build_flags = ${rp2350_base.build_flags}, -g
debug_tool = cmsis-dap

[env:pico2w]
extends = rp2350_base
board = rpipico2w
board_level = pr
board_check = true
upload_protocol = jlink
debug_tool = custom
debug_init_cmds = 
	target extended-remote localhost:3333
	$INIT_BREAK
	monitor reset halt
	$LOAD_CMDS
	monitor init
	monitor reset halt
build_flags = 
	${rp2350_base.build_flags}
	-DRPI_PICO2
	-Ivariants/rp2350/rpipico2w
	-DHW_SPI1_DEVICE
	-DARDUINO_RASPBERRY_PI_PICO_2W
	-DARDUINO_ARCH_RP2040
	-DHAS_WIFI=1
	-DMESHTASTIC_EXCLUDE_WIFI=1
	-DHAS_UDP_MULTICAST=1
build_src_filter = ${rp2350_base.build_src_filter} +<mesh/wifi/>
lib_deps = 
	${rp2350_base.lib_deps}
	${networking_base.lib_deps}
debug_build_flags = ${rp2350_base.build_flags}, -g

[env:CDEBYTE_E77-MBL]
extends = stm32_base
board = ebyte_e77_dev
board_upload.maximum_size = 233472
board_level = extra
build_flags = 
	${stm32_base.build_flags}
	-Ivariants/stm32/CDEBYTE_E77-MBL
	-DSERIAL_UART_INSTANCE=1
	-DPIN_SERIAL_RX=PA3
	-DPIN_SERIAL_TX=PA2
	-DMESHTASTIC_EXCLUDE_ENVIRONMENTAL_SENSOR=1
	-DMESHTASTIC_EXCLUDE_I2C=1
	-DMESHTASTIC_EXCLUDE_GPS=1
	-DMESHTASTIC_EXCLUDE_SCREEN=1
	-DMESHTASTIC_EXCLUDE_POWER_FSM=1
	-DMESHTASTIC_EXCLUDE_POWERMON=1
	-DMESHTASTIC_EXCLUDE_EXTERNALNOTIFICATION=1
	-DMESHTASTIC_EXCLUDE_PAXCOUNTER=1
	-DMESHTASTIC_EXCLUDE_REMOTEHARDWARE=1
	-DMESHTASTIC_EXCLUDE_STOREFORWARD=1
	-DMESHTASTIC_EXCLUDE_CANNEDMESSAGES=1
	-DMESHTASTIC_EXCLUDE_WAYPOINT=1
upload_port = stlink
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:rak3172]
extends = stm32_base
board = wiscore_rak3172
board_level = pr
board_upload.maximum_size = 233472
build_flags = 
	${stm32_base.build_flags}
	-Ivariants/stm32/rak3172
	-DRAK3172
	-DENABLE_HWSERIAL1
	-DPIN_SERIAL1_RX=PB7
	-DPIN_SERIAL1_TX=PB6
	-DPIN_WIRE_SDA=PA11
	-DPIN_WIRE_SCL=PA12
	-DMESHTASTIC_EXCLUDE_ENVIRONMENTAL_SENSOR=1
	-DMESHTASTIC_EXCLUDE_I2C=1
	-DMESHTASTIC_EXCLUDE_GPS=1
	-DMESHTASTIC_EXCLUDE_SCREEN=1
	-DMESHTASTIC_EXCLUDE_POWER_FSM=1
	-DMESHTASTIC_EXCLUDE_POWERMON=1
	-DMESHTASTIC_EXCLUDE_EXTERNALNOTIFICATION=1
	-DMESHTASTIC_EXCLUDE_PAXCOUNTER=1
	-DMESHTASTIC_EXCLUDE_REMOTEHARDWARE=1
	-DMESHTASTIC_EXCLUDE_STOREFORWARD=1
	-DMESHTASTIC_EXCLUDE_CANNEDMESSAGES=1
	-DMESHTASTIC_EXCLUDE_WAYPOINT=1
upload_port = stlink
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:wio-e5]
extends = stm32_base
board = lora_e5_dev_board
board_level = pr
board_upload.maximum_size = 233472
build_flags = 
	${stm32_base.build_flags}
	-Ivariants/stm32/wio-e5
	-DSERIAL_UART_INSTANCE=1
	-DPIN_SERIAL_RX=PB7
	-DPIN_SERIAL_TX=PB6
	-DPIN_WIRE_SDA=PA15
	-DPIN_WIRE_SCL=PB15
	-DHAS_SENSOR=1
	-DENABLE_HWSERIAL2
	-DPIN_SERIAL2_TX=PA2
	-DPIN_SERIAL2_RX=PA3
	-DHAS_GPS=1
	-DGPS_SERIAL_PORT=Serial2
upload_port = stlink
lib_deps = 
	${stm32_base.lib_deps}

[env:9m2ibr_aprs_lora_tracker]
extends = esp32_base
board = esp32doit-devkit-v1
board_level = extra
build_flags = 
	${esp32_base.build_flags}
	-D PRIVATE_HW
	-D EBYTE_E22
	-D EBYTE_E22_900M30S
	-I variants/esp32/diy/9m2ibr_aprs_lora_tracker
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:meshtastic-dr-dev]
extends = esp32_base
board = esp32doit-devkit-v1
board_upload.maximum_size = 4194304
board_upload.maximum_ram_size = 532480
build_flags = 
	${esp32_base.build_flags}
	-D DR_DEV
	-D EBYTE_E22
	-I variants/esp32/diy/dr-dev
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:hydra]
extends = esp32_base
board = esp32doit-devkit-v1
build_flags = 
	${esp32_base.build_flags}
	-D DIY_V1
	-I variants/esp32/diy/hydra
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:meshtastic-diy-v1]
extends = esp32_base
board = esp32doit-devkit-v1
board_check = true
build_flags = 
	${esp32_base.build_flags}
	-D DIY_V1
	-D EBYTE_E22
	-I variants/esp32/diy/v1
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:meshtastic-diy-v1_1]
extends = esp32_base
board = esp32doit-devkit-v1
board_level = extra
build_flags = 
	${esp32_base.build_flags}
	-D DIY_V1
	-D EBYTE_E22
	-I variants/esp32/diy/v1_1
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:esp32c3_super_mini]
extends = esp32c3_base
board = esp32-c3-devkitm-1
build_flags = 
	${esp32_base.build_flags}
	-D PRIVATE_HW
	-I variants/esp32c3/diy/esp32c3_super_mini
	-D ARDUINO_USB_MODE=1
	-D ARDUINO_USB_CDC_ON_BOOT=1
board_level = extra
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:my-esp32s3-diy-eink]
board_level = extra
extends = esp32s3_base
board = my_esp32s3_diy_eink
board_build.arduino.memory_type = dio_opi
board_build.mcu = esp32s3
board_build.f_cpu = 240000000L
upload_protocol = esptool
upload_speed = 921600
lib_deps = 
	${esp32_base.lib_deps}
	zinggjm/GxEPD2@^1.6.2
	adafruit/Adafruit NeoPixel @ ^1.12.0
build_unflags = 
	${esp32s3_base.build_unflags}
	-DARDUINO_USB_MODE=1
build_flags = 
	${esp32_base.build_flags}
	-D PRIVATE_HW
	-I variants/esp32s3/diy/my_esp32s3_diy_eink
	-Dmy
	-DEINK_DISPLAY_MODEL=GxEPD2_290_T5D
	-DEINK_WIDTH=296
	-DEINK_HEIGHT=128
	-DBOARD_HAS_PSRAM
	-mfix-esp32-psram-cache-issue
	-DARDUINO_USB_MODE=0

[env:my-esp32s3-diy-oled]
board_level = extra
extends = esp32s3_base
board = my-esp32s3-diy-oled
board_build.arduino.memory_type = dio_opi
board_build.mcu = esp32s3
board_build.f_cpu = 240000000L
upload_protocol = esptool
upload_speed = 921600
lib_deps = 
	${esp32_base.lib_deps}
	adafruit/Adafruit NeoPixel @ ^1.12.0
build_unflags = 
	${esp32s3_base.build_unflags}
	-DARDUINO_USB_MODE=1
build_flags = 
	${esp32_base.build_flags}
	-D PRIVATE_HW
	-I variants/esp32s3/diy/my_esp32s3_diy_oled
	-DBOARD_HAS_PSRAM
	-mfix-esp32-psram-cache-issue
	-DARDUINO_USB_MODE=0

[env:t-energy-s3_e22]
extends = esp32s3_base
board = esp32-s3-devkitc-1
board_build.partitions = default_16MB.csv
board_level = extra
board_upload.flash_size = 16MB
board_build.arduino.memory_type = qio_opi
build_unflags = 
	${esp32s3_base.build_unflags}
	-D ARDUINO_USB_MODE=1
build_flags = 
	${esp32s3_base.build_flags}
	-D EBYTE_ESP32_S3
	-D BOARD_HAS_PSRAM
	-D ARDUINO_USB_MODE=0
	-D ARDUINO_USB_CDC_ON_BOOT=1
	-I variants/esp32s3/diy/t-energy-s3_e22
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:nrf52_promicro_diy_tcxo]
extends = nrf52840_base
board = promicro-nrf52840
build_flags = ${nrf52840_base.build_flags}
	-I variants/nrf52840/diy/nrf52_promicro_diy_tcxo
	-D NRF52_PROMICRO_DIY
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/diy/nrf52_promicro_diy_tcxo>
lib_deps = 
	${nrf52840_base.lib_deps}
debug_tool = jlink

[env:nrf52_promicro_diy-inkhud]
board_level = extra
extends = nrf52840_base, inkhud
board = promicro-nrf52840
build_flags = 
	${nrf52840_base.build_flags}
	${inkhud.build_flags}
	-I variants/nrf52840/diy/nrf52_promicro_diy_tcxo
	-D NRF52_PROMICRO_DIY
build_src_filter = 
	${nrf52_base.build_src_filter}
	${inkhud.build_src_filter}
	+<../variants/nrf52840/diy/nrf52_promicro_diy_tcxo>
lib_deps = 
	${inkhud.lib_deps}
	${nrf52840_base.lib_deps}
extra_scripts = 
	${env.extra_scripts}
	variants/nrf52840/diy/nrf52_promicro_diy_tcxo/custom_build_tasks.py

[env:nrf52_promicro_diy_xtal]
extends = nrf52840_base
board = promicro-nrf52840
board_level = extra
build_flags = ${nrf52840_base.build_flags}
	-I variants/nrf52840/diy/nrf52_promicro_diy_xtal
	-D NRF52_PROMICRO_DIY
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/diy/nrf52_promicro_diy_xtal>
lib_deps = 
	${nrf52840_base.lib_deps}
debug_tool = jlink

[env:seeed-xiao-nrf52840-wio-sx1262]
board = xiao_ble_sense
extends = nrf52840_base
board_level = extra
build_flags = ${nrf52840_base.build_flags}
	-Ivariants/nrf52840/diy/seeed-xiao-nrf52840-wio-sx1262
	-D PRIVATE_HW
	-Isrc/platform/nrf52/softdevice
	-Isrc/platform/nrf52/softdevice/nrf52
board_build.ldscript = src/platform/nrf52/nrf52840_s140_v7.ld
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/diy/seeed-xiao-nrf52840-wio-sx1262>
lib_deps = 
	${nrf52840_base.lib_deps}
debug_tool = jlink

[env:seeed_xiao_nrf52840_e22_900m30s]
extends = env:seeed_xiao_nrf52840_kit
board_level = extra
build_flags = ${env:seeed_xiao_nrf52840_kit.build_flags}
	-D PRIVATE_HW
	-DEBYTE_E22
	-DEBYTE_E22_900M30S
build_unflags = -DGPS_L76K
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:seeed_xiao_nrf52840_e22_900m33s]
extends = env:seeed_xiao_nrf52840_kit
board_level = extra
build_flags = ${env:seeed_xiao_nrf52840_kit.build_flags}
	-D PRIVATE_HW
	-DEBYTE_E22
	-DEBYTE_E22_900M33S
build_unflags = -DGPS_L76K
lib_deps = bblanchon/ArduinoJson@^7.4.2

[env:WashTastic]
extends = nrf52840_base
board = promicro-nrf52840
board_level = extra
build_flags = ${nrf52840_base.build_flags}
	-I variants/nrf52840/diy/nrf52_promicro_diy_tcxo
	-D PRIVATE_HW
	-D EBYTE_E22_900M30S
build_src_filter = ${nrf52_base.build_src_filter} +<../variants/nrf52840/diy/nrf52_promicro_diy_tcxo>
lib_deps = 
	${nrf52840_base.lib_deps}
debug_tool = jlink

[env:xiao_ble]
extends = env:seeed_xiao_nrf52840_kit
board_level = extra
build_flags = ${env:seeed_xiao_nrf52840_kit.build_flags}
	-D PRIVATE_HW
	-DXIAO_BLE_LEGACY_PINOUT
	-DEBYTE_E22
	-DEBYTE_E22_900M30S
build_unflags = -DGPS_L76K
lib_deps = bblanchon/ArduinoJson@^7.4.2

[inkhud]
build_src_filter = 
	+<graphics/niche/>; Include the nicheGraphics directory
build_flags = 
	-D MESHTASTIC_INCLUDE_NICHE_GRAPHICS
	-D MESHTASTIC_INCLUDE_INKHUD
	-D MESHTASTIC_EXCLUDE_SCREEN
	-D MESHTASTIC_EXCLUDE_INPUTBROKER
	-D HAS_BUTTON=0
lib_deps = 
	https://github.com/ZinggJM/GFX_Root#2.0.0
